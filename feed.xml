<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2021-08-04T07:25:39+00:00</updated><id>/feed.xml</id><title type="html">hanykowska</title><subtitle>All things data and more by Hanna Nykowska</subtitle><entry><title type="html">How to turn macros into custom Alteryx tools</title><link href="/howto-macros-to-custom-tools" rel="alternate" type="text/html" title="How to turn macros into custom Alteryx tools" /><published>2021-01-19T00:00:00+00:00</published><updated>2021-01-19T00:00:00+00:00</updated><id>/howto-macros-to-custom-tools</id><content type="html" xml:base="/howto-macros-to-custom-tools">&lt;p&gt;If you like to build macros to make your life easier and want to take it to the next level, youâ€™re in the right place!
Learn how to turn macros into custom tools. in Alteryx exemplified by the Test 1:1 Join&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2021/01/19/how-to-turn-macros-into-custom-alteryx-tools/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;
&lt;p&gt;&lt;em&gt;Disclaimer: This post focuses on Alteryx macros. You can actually make custom tools that are not a macro, but that is way beyond the scope of this post. You can find more on custom tools built with SDKs &lt;a href=&quot;https://help.alteryx.com/developer/current/SDK/ToolQuickStart.htm?TocPath=SDKs%7CBuild%20Custom%20Tools%7C_____1&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;here&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;div style=&quot;height:24px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Why?&lt;/h2&gt;
&lt;p&gt;One of the main reasons (the only reason?) for custom tools is creating ready solutions for problems you find yourself having to solve &lt;strong&gt;a lot&lt;/strong&gt;. If you know others run into the same issues, you can share it with them (or better yet, upload it to Alteryx Gallery so that everyone can benefit)!&lt;/p&gt;
&lt;p&gt;Of course the custom solution here is a macro. But you can take it to the next level so that Alteryx recognises it and places in the right category!&lt;/p&gt;
&lt;p&gt;A great use case for such custom tools is Quality Control - making sure that the data processing is going exactly as planned. Let's look at a macro I have recently built &lt;em&gt;Test 1-1 Join&lt;/em&gt;.&lt;/p&gt;
&lt;div style=&quot;height:45px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3&gt;Background on Test 1-1 Join&lt;/h3&gt;
&lt;p&gt;Test 1-1 Join was created originally when I was working for a client and had to do many joins. It was expected that not all records will join, but those that did join had to be a 1:1 join, meaning no duplicates. With a big, complex workflow, I wanted a simple tool that would check if the join was 1:1 and let me know if anything was wrong.&lt;/p&gt;
&lt;p&gt;Below is what I built:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-52.png&quot; alt=&quot;&quot; class=&quot;wp-image-18833&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The macro needs to be connected to the data going into and out of the join tool to be tested and based on the count of records throws an error if the join was not one-to-one for both inputs.&lt;/p&gt;
&lt;p&gt;After the client engagement, I thought this actually might be useful and so I recreated the macro and &lt;a href=&quot;https://gallery.alteryx.com/#!app/Test-1-1-Join/5fff1bed8a93371688307a8e&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;uploaded it to Alteryx Gallery&lt;/a&gt;. Let's talk now about how to get a macro to show up as one of the tools in the tool palette.&lt;/p&gt;
&lt;div style=&quot;height:83px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;How?&lt;/h2&gt;
&lt;p&gt;It's a fairly simple process (once you have your macro ready of course).&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;#step1&quot;&gt;Save it in the right place&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#step2&quot;&gt;Assign it a Category&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#step3&quot;&gt;Add Tags&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#step4&quot;&gt;Add description details&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#step5&quot;&gt;Add author details&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#step6&quot;&gt;Share it!&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;
&lt;div style=&quot;height:48px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3 id=&quot;step1&quot;&gt;1. Save it in the right place&lt;/h3&gt;
&lt;p&gt;Alteryx can automatically pick up on new macros. To make it happen, you need to &lt;strong&gt;map&lt;/strong&gt; the location where you are storing all macros. Then save the new macro in the mapped folder.&lt;/p&gt;
&lt;p&gt;But how does one &lt;em&gt;map a folder&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;Go to Options -&amp;gt; User Settings -&amp;gt; Edit User Settings:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-53.png&quot; alt=&quot;&quot; class=&quot;wp-image-18838&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Navigate to Macros tab and click on the plus button:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-54.png&quot; alt=&quot;&quot; class=&quot;wp-image-18841&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Give an appropriate Category Name. Macros works perfectly fine. Then click on the button with three dots to navigate to the folder with macros.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-55.png&quot; alt=&quot;&quot; class=&quot;wp-image-18844&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Click OK to confirm and you should see something similar:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-56.png&quot; alt=&quot;&quot; class=&quot;wp-image-18845&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now whenever you build a macro, the first place Alteryx will want to save it to is that folder. (My guess is that if you have more locations saved here, you can pick one as the default for saving with the button on the right.)&lt;/p&gt;
&lt;p&gt; If there are any macros added to that location, Alteryx will pick up on that and will show them in the ribbon with tools:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-57.png&quot; alt=&quot;&quot; class=&quot;wp-image-18847&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;If you have any nested folders inside that folder, they will be shown separately:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-58.png&quot; alt=&quot;&quot; class=&quot;wp-image-18848&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;In the above image, you can see that the names of the categories are based on the location relative to Macros folder. Apart from CReW Macros category... Which looks nicely formatted and not referencing the nested path. Which brings me to step 2:&lt;/p&gt;
&lt;h3 id=&quot;step2&quot;&gt;2. Assign it a Category&lt;/h3&gt;
&lt;p&gt;Assigning a category in the Meta Info of the workflow configuration, will add the macro into the specified category, or create a new category!&lt;/p&gt;
&lt;p&gt;To do so, click on the canvas, so that the configuration pane says Workflow - Configuration, and navigate to Meta Info:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-59.png&quot; alt=&quot;&quot; class=&quot;wp-image-18853&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Scroll down to the very bottom of the configuration pane. The penultimate section should be called Tool Palette. For Category Name put down any of the existing categories (I chose Developer as it seemed relevant for my Test 1-1 Join) or add a new one, just like CReW Macros in their Moving Summarize macro.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-60.png&quot; alt=&quot;&quot; class=&quot;wp-image-18854&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;After saving any changes made, and maybe restarting Alteryx (particularly if you create a new category), the macro should be presented as one of the tools in the right category!&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/developer-category-1.png&quot; alt=&quot;&quot; class=&quot;wp-image-18870&quot; /&gt;&lt;figcaption&gt;sidebar nation, did you know you can &lt;strong&gt;pin&lt;/strong&gt; categories so they show up next to favorites tab? Really useful if you often use categories that are further down!&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;This will get your new macro to be presented as one of the tools. But why stop here? We can make our lives even easier!&lt;/p&gt;
&lt;h3 id=&quot;step3&quot;&gt;3. Add tags&lt;/h3&gt;
&lt;p&gt;In the same section as assigning the Category Name, you can list tags related to the macro. Why, you ask? This will show your macro in the search!&lt;/p&gt;
&lt;p&gt;In Search Tags, list key words which should be associated with your tool. In my quick test, it seemed that the parts of the name of the macro will be picked up on by the search bar/ If you want any additional words to bring up your macro, here's the place to do so. For example, if I add 1:1 phrase (I named my macro Test &lt;strong&gt;1-1&lt;/strong&gt; Join, to make sure I don't get any issues with a colon sign in the file path):&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-63.png&quot; alt=&quot;&quot; class=&quot;wp-image-18891&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;I can use &lt;strong&gt;1:1&lt;/strong&gt; to find my custom macro!&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-62.png&quot; alt=&quot;&quot; class=&quot;wp-image-18890&quot; /&gt;&lt;/figure&gt;
&lt;h3 id=&quot;step4&quot;&gt;4. Add description details&lt;/h3&gt;
&lt;p&gt;In Meta Info tab, you can also give the description of the workflow - what is it that the macro is actually doing? This will be displayed on the Alteryx Gallery page of your macro. (Orange highlight in a picture below.)&lt;/p&gt;
&lt;p&gt;You can also add a URL and specify the display text (blue highlight below). This is very useful for adding additional resources, eg. documentation. I have created a documentation page on &lt;a href=&quot;https://www.notion.so/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener nofollow&quot;&gt;Notion&lt;/a&gt; which makes it easy for me to maintain it. But you can use other tools that you like (eg. Google Docs)!&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-64-1024x456.png&quot; alt=&quot;&quot; class=&quot;wp-image-18897&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Both description and URL with display text can be set up in Description section of Meta Info:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-65.png&quot; alt=&quot;&quot; class=&quot;wp-image-18899&quot; /&gt;&lt;/figure&gt;
&lt;h3 id=&quot;step5&quot;&gt;5. Add author details&lt;/h3&gt;
&lt;p&gt;Final touch in terms of providing information is to specify the author and the company, so that people will know who they should contact if they have ideas for improvement or if they look for more goodies!&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-66.png&quot; alt=&quot;&quot; class=&quot;wp-image-18901&quot; /&gt;&lt;/figure&gt;
&lt;h3 id=&quot;step6&quot;&gt;6. Share it!&lt;/h3&gt;
&lt;p&gt;OK! Now that the macro is ready to be shared with other people there are pretty much two ways I'd suggest.&lt;/p&gt;
&lt;p&gt;ONE: In the mapping section (Step 1), use a folder that's on a shared drive or location that others have access to. That way they can map the same location in their own instance. Whenever the macro is updated they will get it automatically!&lt;/p&gt;
&lt;p&gt;TWO: Save the macro on Ateryx Gallery and Publish. This will require an update to the saved file on Alteryx Gallery whenever you want to change anything. The massive advantage of this approach is that it will be available to many other people also outside of your organisation! You can actually find other custom tools (and macros) on Alteryx Gallery, including those developed by Alteryx!&lt;/p&gt;
&lt;p&gt;Let's talk through option number TWO (do it &lt;strong&gt;only&lt;/strong&gt; if your macro is to be shared publicly). Go to File &amp;gt; Save As &amp;gt; Public Gallery &amp;gt; Alteryx Gallery&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-67.png&quot; alt=&quot;&quot; class=&quot;wp-image-18903&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;If you haven't already, log in in the new pop-up window:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-68.png&quot; alt=&quot;&quot; class=&quot;wp-image-18907&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;You will see now a dialog to save the workflow on Alteryx Gallery. You can change workflow name if you want (I left mine as the default). A comment in details (optional) is what shows up as a comment next to the version of the tool (which you can see only after logging in and for your own tools). If you want to have a description of the workflow, go back to Step 4.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-69.png&quot; alt=&quot;&quot; class=&quot;wp-image-18909&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;In workflow options, you can go to manage assets and make sure any necessary external resources are included in the upload. For example, if you build a macro that connects to a data file, you probably want to include that. What you can see in my screenshot below are assets related to Count Records macro. As this is a macro that comes with Alteryx, they don't have to be included for the macro to work. (Same with data cleansing tool!)&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-70.png&quot; alt=&quot;&quot; class=&quot;wp-image-18911&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;Side note on downloading workflows with Count Records macro from Alteryx Gallery - they will likely throw some errors on those missing dependencies. Clicking through OK is enough - those errors will not affect how the overall workflow works.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Once managing assets is sorted click Done, it will take you back to the general save page. When you're happy with your settings, hit Save.&lt;/p&gt;
&lt;p&gt;After the upload is complete, you will have the option to see it in the browser. This is what I see (I saved mine as Test 1-1 Join2 so that I know which one to delete once I'm done....)&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-71.png&quot; alt=&quot;&quot; class=&quot;wp-image-18916&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;A few things to change: the image, sharing, tags. Click on Change Icon button (below the current icon) and select an appropriate image - I chose the same file I used for the macro icon.&lt;/p&gt;
&lt;p&gt;Add Tags (just above the Download tool) will help categorise your upload. It will be a multi-choice selection.&lt;/p&gt;
&lt;p&gt;At the moment, the workflow is accessible only to you. Go to Sharing dropdown, select Place in Public Gallery. This will allow anyone with a link to your tool page to access it (including people who are not logged in), and your macro will show up in the search on Alteryx Gallery page.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-72.png&quot; alt=&quot;&quot; class=&quot;wp-image-18918&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Click on Yes and let people know what you've published so that they can take the advantage of it! If you go to Sharing again, you will see that the options now have changed:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2021/01/image-73.png&quot; alt=&quot;&quot; class=&quot;wp-image-18919&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;For guidance on how to install new tools from the gallery, you can use the &lt;em&gt;How to Install&lt;/em&gt; section of my Test 1-1 Join tool documentation &lt;a href=&quot;https://www.notion.so/Test-1-1-Join-Macro-Documentation-7a2c1dbbff4743349e46c3eb41fba05f#b35abb94219c4afe9bd5942b06b17120&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;div style=&quot;height:56px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;p&gt;That's it! Thanks for reading and enjoy your new custom tools!&lt;/p&gt;</content><author><name>Hanna Nykowska</name></author><category term="alteryx" /><summary type="html">If you like to build macros to make your life easier and want to take it to the next level, youâ€™re in the right place! Learn how to turn macros into custom tools. in Alteryx exemplified by the Test 1:1 Join First published on The Information Lab Blog.</summary></entry><entry><title type="html">How To in Alteryx: Multi-Row Formula Tool for Rank</title><link href="/video-howto-alteryx-multirowformula-rank" rel="alternate" type="text/html" title="How To in Alteryx: Multi-Row Formula Tool for Rank" /><published>2020-12-30T00:00:00+00:00</published><updated>2020-12-30T00:00:00+00:00</updated><id>/video-howto-alteryx-multirowformula-rank</id><content type="html" xml:base="/video-howto-alteryx-multirowformula-rank">&lt;p&gt;Not sure how to leverage Multi-Row Formula Tool? In this short video, Iâ€™ll show you how to use it to rank data.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=iNC4l24fTEk&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab YouTube channel&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/iNC4l24fTEk&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;</content><author><name>Hanna Nykowska</name></author><category term="alteryx" /><category term="videos" /><summary type="html">Not sure how to leverage Multi-Row Formula Tool? In this short video, Iâ€™ll show you how to use it to rank data. First published on The Information Lab YouTube channel</summary></entry><entry><title type="html">How To in Alteryx: Multi-Row Formula Tool for Filling Missing Data</title><link href="/video-howto-alteryx-multirowformula-filling-missing-data-copy" rel="alternate" type="text/html" title="How To in Alteryx: Multi-Row Formula Tool for Filling Missing Data" /><published>2020-12-02T00:00:00+00:00</published><updated>2020-12-02T00:00:00+00:00</updated><id>/video-howto-alteryx-multirowformula-filling-missing-data%20copy</id><content type="html" xml:base="/video-howto-alteryx-multirowformula-filling-missing-data-copy">&lt;p&gt;New to Multi-Row Formula Tool? Or maybe not new but still a bit confused? Learn how to use it to fill in missing data in 5 minutes!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=yU8UbZhzQNM&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab YouTube channel&lt;/a&gt;
&lt;!--more--&gt;&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/watch?v=yU8UbZhzQNM&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;</content><author><name>Hanna Nykowska</name></author><category term="alteryx" /><category term="videos" /><summary type="html">New to Multi-Row Formula Tool? Or maybe not new but still a bit confused? Learn how to use it to fill in missing data in 5 minutes! First published on The Information Lab YouTube channel</summary></entry><entry><title type="html">Python Tool in Alteryx: Deduplicating Images</title><link href="/alteryx-python-deduplicating-images" rel="alternate" type="text/html" title="Python Tool in Alteryx: Deduplicating Images" /><published>2020-08-10T00:00:00+00:00</published><updated>2020-08-10T00:00:00+00:00</updated><id>/alteryx-python-deduplicating-images</id><content type="html" xml:base="/alteryx-python-deduplicating-images">&lt;p&gt;New to python tool in alteryx or python in general? Hereâ€™s a step by step description of how I built an app that identifies duplicate images and moves them to a new location.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2020/08/10/python-tool-in-alteryx-deduplicating-images/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;
&lt;p&gt;Many applications and pieces of software proud themselves to be code-free. What's special about alteryx, is that it's code-friendly. &lt;em&gt;Huh?&lt;/em&gt; It means, you &lt;strong&gt;don't need to&lt;/strong&gt; code to be able to use it, but &lt;strong&gt;you can&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;In this blog post, I will describe one of my recent projects where I built an app that looks at the images in a specified folder, identifies duplicate images and moves those duplicates into a new sub-folder called &lt;em&gt;Duplicates&lt;/em&gt;. This Analytic App incorporates alteryx functionality and resources available for python users.&lt;/p&gt;
&lt;div style=&quot;height:29px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Glossary&lt;/h2&gt;
&lt;p&gt;New to Python or programming in general? Some terms below might sound unfamiliar. Here's the way I understand them* so we can be on the same page ðŸ™‚&lt;/p&gt;
&lt;p&gt;*some comparisons are more to give you an intuition understanding and are not precise&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;programming language - a way to communicate with the computer and tell it to do some operations&lt;/li&gt;&lt;li&gt;Python - a type of programming language. Comparing to other programming languages (bear in mind I have limited knowledge on this, but still have had some experiences in using C/C++, Matlab, Java, JavaScript, and Assembly), I like a few things about Python: it is a high-level language, so it's pretty easy to read as a human and to understand the code; it enforces indentations and the layout of the code, making it fairly easy to understand the hierarchies of elements and looks clean to me; I find it easier to grasp than other languages&lt;/li&gt;&lt;li&gt;function - performs a specific task, which can be adjusted by specifying arguments and parameters of the function. It is pretty much an equivalent to a tool in Alteryx. Similarly to Alteryx, you can have functions that are coming as part of Python language (normal Alteryx tools), or you can write/create one yourself! (equivalent to a macro)&lt;/li&gt;&lt;li&gt;class/object - in a way it's a custom type of data, that can store different information and be subjected to different operations.&lt;/li&gt;&lt;li&gt;module - a collection of functions and objects that are extending Python functionality, saved in a single python file. It's kind of like a category of tools in Alteryx&lt;/li&gt;&lt;li&gt;package - a collection of modules around a similar topic. Think about predictive tools in Alteryx. There is a number of categories that fall under the predictive package you have to install separately from Alteryx installation. It's very similar to packages in python. Except there are MANY of those packages...&lt;/li&gt;&lt;/ul&gt;
&lt;div style=&quot;height:28px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Why?&lt;/h2&gt;
&lt;h3&gt;Why use Python in Alteryx?&lt;/h3&gt;
&lt;p&gt;First of all, let's take a look at some of the reasons I decided to dip my toes in the python tool:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Expand Alteryx functionality - Alteryx is great on its own most of the time. There are, however, situations where a problem you're trying to solve doesn't have an easy or feasible solution in baseA approach (&lt;a href=&quot;https://community.alteryx.com/t5/Alter-Nation-Blog/Introducing-the-Advent-of-Code-BaseA-style/ba-p/498038&quot;&gt;pure Alteryx&lt;/a&gt;). Thankfully, Alteryx is endlessly extensible and we can leverage bash scripts, R and Python codes, and more.&lt;/li&gt;&lt;li&gt;Practice Python - I have used Python in the past and enjoyed it. I thought it would be easier for me to get into the area of expanding Alteryx functionality building on something I'm familiar with. I was also looking forward to coding again as it is something I did at uni and enjoyed, but haven't had the chance to do it in client work recently.&lt;/li&gt;&lt;li&gt;I went to a talk that mentioned the Python Tool during Inspire Europe 2019 and I found it very encouraging to try it myself. Mind you it took almost a year but there was a lot going on in that year so I'm happy I finally made it.&lt;/li&gt;&lt;/ul&gt;
&lt;h3&gt;Why this project?&lt;/h3&gt;
&lt;p&gt;All is great. I know I want to use Python Tool, I know I'll have about two days for the project, but what exactly am I going to do? I wanted to use the time for the project to build my Python muscles and learn something new but I also wanted to do something that will be useful. Instead of spending hours on the internet and trying to find something mildly interesting, I asked within The Information Lab if any of my co-workers have any ideas, hoping there will be at least one specific problem to solve. Lo and behold, there was! &lt;a href=&quot;https://www.linkedin.com/in/benjnmoss/&quot;&gt;Ben Moss&lt;/a&gt; needed to clean up some images by removing duplicates.&lt;/p&gt;
&lt;p&gt;Other suggestions included webscraping pages with dynamic content, accessing AWS API, OCR (Optical Character Recognition, in other words, reading text from images), optimisation tasks with genetic algorithms, or anything with matrix calculations. Thanks to &lt;a href=&quot;https://twitter.com/macdonaldj&quot;&gt;JMac&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/dsmd4vid&quot;&gt;David Sanchez Martin&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/scallybrian&quot;&gt;Brian Scally&lt;/a&gt; for their suggestions! I might actually review them and attempt them as well. The reason I went with Ben's suggestion, was that it was a specific problem to tackle that was also easy for me to imagine and set up a testing environment. Here is my folder for tests:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled.png&quot; alt=&quot;&quot; class=&quot;wp-image-16765&quot; /&gt;&lt;figcaption&gt;Original images titled as Pretty Data Art were made by Alessandro Costanzo&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Alright, let's get to it!&lt;/p&gt;
&lt;div style=&quot;height:25px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;High-level plan&lt;/h2&gt;
&lt;p&gt;The outcome of the project was supposed to be an analytic app (run locally) that uses python as one of the steps. Before diving into the Python tool, I needed to figure out how to approach the whole task. I broke it down to smaller steps (with implementation in parenthesis):&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;#getFolderLocation&quot;&gt;Get the folder location (folder browse)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#getFolderLocation&quot;&gt;Get the list of all images (directory tool)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#getPixelInfo&quot;&gt;Get the pixel information of all images (python tool)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#identifyDuplicates&quot;&gt;Identify duplicates (python tool)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#createNewLocation&quot;&gt;Create a new location (python tool)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#moveFiles&quot;&gt;Move duplicates to the new location (started with python tool but ended up using run command and bash script)&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;Let's look at these steps in more detail&lt;/p&gt;
&lt;div style=&quot;height:34px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2 id=&quot;getFolderLocation&quot;&gt;Get the folder location and the list of images&lt;/h2&gt;
&lt;p&gt;This step was straightforward as it was implemented with tools I've used before:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled-1-1.png&quot; alt=&quot;&quot; class=&quot;wp-image-16767&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The Directory tool (no. 1) lists the contents of the specified directory. In normal set up, you simply select a folder on your machine. Adding the Folder Browse tool (no. 2) allows the user of the analytic app to change the folder location in a nice interface, rather than having to open up the workflow. The Action tool (no. 3) is set to Update Directory with Folder Browse (Default). Finally, I'm using Select tool (no. 4) to limit the information I'm passing down the workflow only to columns that I need: FullPath, Directory, and FileName.&lt;/p&gt;
&lt;p&gt;After these four tools, I have the list of images I want to make unique. How?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;EDIT &lt;/strong&gt;(forgot to mention how to make an analytic app in alteryx... oops!): To make sure your workflow is recognised as an app, go to Workflow Configuration -&amp;gt; Workflow -&amp;gt; In Type, select Analytic App. As per gif below:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/analytic-app.gif&quot; alt=&quot;&quot; class=&quot;wp-image-16881&quot; /&gt;&lt;/figure&gt;
&lt;div style=&quot;height:38px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;How can I identify duplicate images?&lt;/h2&gt;
&lt;p&gt;This is the hard part. I have done some image processing in uni but it was fairly straightforward and with Matlab, not Python. It was also a few years ago, so, ya know... Anyway, just like whenever I'm tasked with something I don't know much about, I started googling.&lt;/p&gt;
&lt;p&gt;Before reading in the images, I wanted to know how does one compare two images in Python. I expected that different methods for comparing images may require different ways of reading images in the first place.&lt;/p&gt;
&lt;p&gt;I have come across an article &lt;em&gt;&lt;a href=&quot;https://www.pyimagesearch.com/2014/09/15/python-compare-two-images/&quot;&gt;How-To: Python Compare Two Images&lt;/a&gt;&lt;/em&gt; by Adrian Rosebrock. The article explored two methods of comparing two images: Mean Squared Error (MSE) and Structural Similarity Index (SSIM). Mean Squared Error looks at pixel-by-pixel values and compares the difference between them, which I would expect to be quite temperamental (more sensitive to changes in the shade or intensity of an image rather than change to the content). SSIM, developed by &lt;a href=&quot;https://www.cns.nyu.edu/pub/eero/wang03-reprint.pdf&quot;&gt;Wang et al&lt;/a&gt;, compares the structural information of a section of the image. I'm gonna be honest, I read through that article, it seemed to me that SSIM despite being more computationally heavy was a better option so decided to go with that. (I wanted my application to get rid of very similar images too, not only exact duplicates.)&lt;/p&gt;
&lt;p&gt;Thankfully, SSIM has been already implemented and is available as &lt;a href=&quot;https://scikit-image.org/docs/stable/auto_examples/transform/plot_ssim.html&quot;&gt;part of scikit-image library&lt;/a&gt;. Being able to actually use it and get it to work took a few trials but I finally made it and will only write up the version that worked (with some notes where possible). Let's park it for now, we will come back to it later.&lt;/p&gt;
&lt;div style=&quot;height:25px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Python Tool&lt;/h2&gt;
&lt;p&gt;Before we read in the images and identify duplicates, let's talk Python tool itself.&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter size-large is-resized&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled-2.png&quot; alt=&quot;&quot; class=&quot;wp-image-16768&quot; width=&quot;172&quot; height=&quot;149&quot; /&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled-3.png&quot; alt=&quot;&quot; class=&quot;wp-image-16769&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;It's a part of the Developer tools, it can take multiple incoming connections and has 5 output anchors. When you click on this tool what you will see in the configuration pane is &lt;a href=&quot;https://jupyter.org/&quot;&gt;Jupyter Notebook&lt;/a&gt;, which will allow you to run code bit by bit in an interactive manner. It means you can write blocks of code (like you see in the image above) that will print messages when run. I have found it very helpful when I was developing the code as I was able to see the variable values pretty much at any point, pinpointing any issues that came my way. Jupyter Notebook also allows you to add blocks of text to add any notes or documentation (which I could have used a bit more).&lt;/p&gt;
&lt;p&gt;You may have noticed, that there are two modes: Interactive (Jupyter Notebook) and Production. As I mentioned, Interactive is useful for development part because it prints out messages and you can easily change separate sections of code and see how the results change. The second option, Production, transforms the code you wrote in interactive mode into a single piece of code that doesn't print out anything and so it will be faster to run when you are working on other parts of the workflow. I will be using the Interactive mode with Jupyter Notebook for the rest of this blog.&lt;/p&gt;
&lt;h3&gt;Packages&lt;/h3&gt;
&lt;p&gt;As mentioned in the glossary, packages allow me to expand the functionality of Python (and, by proxy, of Alteryx). First, we need to make sure we have installed all packages we'll be using:&lt;/p&gt;
&lt;div class=&quot;wp-block-group&quot;&gt;&lt;div class=&quot;wp-block-group__inner-container&quot;&gt;&lt;!-- wp:code --&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# List all non-standard packages to be imported by your 
# script here (only missing packages will be installed)
from ayx import Package
Package.installPackages(&amp;#91;'pandas','scikit-image','opencv-python'])
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;Package&lt;/em&gt; is a module within &lt;em&gt;ayx&lt;/em&gt; package that allows to manage Python packages in Alteryx installation. Especially, to install packages that are not included by default. You can see that I am installing pandas, scikit-image, and opencv-python packages. Good news is that these packages will be only installed if they are missing, so I think it's good to leave that section in.&lt;/p&gt;
&lt;p&gt;Now that I have all the necessary packages installed in my Alteryx Python environment, I can import them to my code:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# to read from and write to alteryx workflow:
from ayx import Alteryx
# to apply structural similarity index for identifying duplicates:
from skimage.metrics import structural_similarity as ssim
# extra mathematical operations:
from statistics import median
from math import floor
# to be able to know the time of execution and improve performance of the code:
from timeit import default_timer as timer
# a package for data analysis and handling tabular data:
import pandas as pd
# to create a new directory:
import os
# to open images
import cv2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, I'm ready to read in the data connected to the Python tool and get on with the project.&lt;/p&gt;
&lt;div style=&quot;height:29px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2 id=&quot;getPixelInfo&quot;&gt;Connecting to data and opening up the images&lt;/h2&gt;
&lt;p&gt;First, let's take a look at the help document to know how to import data from the workflow.&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;Alteryx.help() 
# Prints out information on how to read data from the connections to the Python tool
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What it looks like in Jupyter notebook:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/jupyter-notebook-alteryx-help.gif&quot; alt=&quot;&quot; class=&quot;wp-image-16770&quot; /&gt;&lt;/figure&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled-4.png&quot; alt=&quot;&quot; class=&quot;wp-image-16771&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;I can see that Alteryx.read() function allows me to read in data from a connection that I need to specify (Python tool can take multiple incoming connections) in '#1' format (a string). To be able to see the data, you need to run the workflow with the python tool on the canvas and connected to desired tools. I tried running the workflow with the python tool in a collapsed container but that didn't work, sadly. Which means that the Python tool has to be run as well. The data is brought in a &lt;a href=&quot;https://pandas.pydata.org/pandas-docs/stable/getting_started/dsintro.html#dataframe&quot;&gt;pandas dataframe&lt;/a&gt; format.&lt;/p&gt;
&lt;p&gt;Let's read in the data coming in incoming connection #1 and assign it to &lt;em&gt;directory&lt;/em&gt; variable:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Read in files data
directory = Alteryx.read(&quot;#1&quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled-5.png&quot; alt=&quot;&quot; class=&quot;wp-image-16772&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;It is exactly the same information going into the Python tool, so everything works great! One thing you might have noticed is that Python starts indexing (row numbers) from 0 instead 1.&lt;/p&gt;
&lt;p&gt;Moving on, let's prepare a table that will hold the image data. What I will need:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;full path to access the image,&lt;/li&gt;&lt;li&gt;filename to later create a new path if the image is a duplicate,&lt;/li&gt;&lt;li&gt;duplicate flag so that I can store all images together whether they are duplicates or not,&lt;/li&gt;&lt;li&gt;new path, which I will change for images flagged as duplicates,&lt;/li&gt;&lt;li&gt;image to store the pixel values,&lt;/li&gt;&lt;li&gt;width and height to know the size of the image (the images need to be of the same size to be compared)&lt;/li&gt;&lt;/ul&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Initialise pandas DataFrame for storing image information
index = directory.index
columns = &amp;#91;'FullPath','FileName','Duplicate','NewPath','image','width','height']
images_df = pd.DataFrame(index=index, columns=columns)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;On the second line, I am creating a new variable which is the same as the index of &lt;em&gt;directory&lt;/em&gt; dataframe (data from incoming connection #1). That's because I want to have a table that has a single row for each image in my folder. Next, I'm creating a variable that has all of the columns I want to include in my table (you may notice they are very similar to what I've described above). Finally, I am initialising a pandas (pd) dataframe, with rows indexed after my new &lt;em&gt;index&lt;/em&gt; variable and with columns I specified in my &lt;em&gt;columns variable.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Now that I have a skeleton for my table, I can populate it with some default values:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Populate that table with values from the input and some dummy values
for row in index:
    images_df&amp;#91;'FullPath']&amp;#91;row] = directory&amp;#91;'FullPath']&amp;#91;row]
    images_df&amp;#91;'FileName']&amp;#91;row] = directory&amp;#91;'FileName']&amp;#91;row]
    images_df&amp;#91;'Duplicate']&amp;#91;row] = False
    images_df&amp;#91;'NewPath']&amp;#91;row] = directory&amp;#91;'FullPath']&amp;#91;row]
    images_df&amp;#91;'image']&amp;#91;row] = cv2.imread(images_df&amp;#91;'FullPath']&amp;#91;row])
    images_df&amp;#91;'width']&amp;#91;row] = images_df&amp;#91;'image']&amp;#91;row].shape&amp;#91;0]
    images_df&amp;#91;'height']&amp;#91;row] = images_df&amp;#91;'image']&amp;#91;row].shape&amp;#91;1]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;First thing you may notice is 'for row in index:'. This goes through all values within my index (0 through to 6) and holds the current index value in variable &lt;em&gt;row&lt;/em&gt;. This approach is called for-loop and it is in a way similar to a batch macro where you repeat the same operation for a list of options.&lt;/p&gt;
&lt;p&gt;Columns FullPath and NewPath are initialised to be the same as later I will be only changing NewPath for duplicate images. The default for Duplicate flag I decided to set to False as I expect only a small portion of the images to actually be duplicates. So far, I have either referenced my previous table &lt;em&gt;directory&lt;/em&gt; or set a specific value (False). However, we're getting to the realm of images, and I'm using cv2.imread() function to open the image and store its pixel information in my &lt;em&gt;images_df&lt;/em&gt; dataframe. For getting width and height of the image, I am accessing &lt;em&gt;shape&lt;/em&gt; attribute of the image I opened on the previous line. &lt;em&gt;shape&lt;/em&gt; returns the shape (wink wink) as an object with two positions, the first position is the width (index of 0), the second position is the height (index of 1).&lt;/p&gt;
&lt;p&gt;Let's have a look if that worked:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/Untitled-6.png&quot; alt=&quot;&quot; class=&quot;wp-image-16773&quot; /&gt;&lt;/figure&gt;
&lt;p&gt; I can see my table nicely populated with data and so I can continue the fun! &lt;/p&gt;
&lt;div style=&quot;height:21px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2 id=&quot;identifyDuplicates&quot;&gt;Identifying duplicates&lt;/h2&gt;
&lt;h3&gt;Setting up&lt;/h3&gt;
&lt;p&gt;Alright, I have previously decided on using SSIM to identify duplicate images. Before we get on to running those comparisons let's consider the restrictions of that method:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;you can only do a one-to-one comparison&lt;/li&gt;&lt;li&gt;the images that you are comparing have to be of the same size&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;Ok, what does it mean in practice? Let's start with point no. 2 because that has an easier answer. I will need all images to be the same size. There are fortunately functions to resize the image, but what size would be best? Finding the answer took me a while and, frankly, I could have dived deeper into that topic to find the best answer. I didn't do that because I got to a point where it was good enough and wanted to move on.&lt;/p&gt;
&lt;p&gt;My initial thought was to find the maximum dimensions and resize all images to fit that so that the comparisons will be as precise as possible. The problem is if you have one massive image, all images will be massive. What about a minimum dimension? Similar issue, if you have a very tiny image, all images would be tiny and the comparisons may not make sense. Then I decided to use the median thinking that I wouldn't have to resize many images a lot. I was quite happy with this approach. The problem was that the comparisons were taking quite a lot of time. In the end, I settled on using 200x200 dimension for all comparisons and it seems to be working fine.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;If I wanted to find the optimal size, I would need to run my code with a number of setting and see what is the minimum size for comparison that also has an acceptable level of comparison accuracy. That sounds like a lot of work for a small reward so I will save this for a rainy day.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;First, I initialise the sizing. Having width and height as separate variables made it easier for me to tweak it between set values, min, max, and medians:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Initialise the size for resizing
width = 200 
height = 200 &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then I could move on to looping through the rows in &lt;em&gt;images_df&lt;/em&gt; and use cv2.resize() function to make all images equal in size:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Resize the images
for row in index:
    images_df&amp;#91;'image']&amp;#91;row] = cv2.resize(images_df&amp;#91;'image']&amp;#91;row],(width, height))&lt;/code&gt;&lt;/pre&gt;
&lt;div style=&quot;height:24px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;p&gt;Back to restriction no. 1: only one-to-one comparisons mean I will need to do a lot of comparisons and I need to find a way to limit them as much as possible. The minimum would be not duplicating the comparisons. If we have two images: image1 and image2, image1-image1 comparison is pointless as we're comparing the same image with itself, image1-image2 comparison will have the same SSIM as image2-image1 so I only need to do one of those. Great. How do I translate this for many more images than two?&lt;/p&gt;
&lt;p&gt;Let's 'draw' it out. Imagine I have four images with indices of 0, 1, 2, 3. I can split them into comparisons table with image1 and image2 columns (both identifying the indices of the images I want to compare within a single comparison), and ssim column for storing the results of that comparison. First, I want to make all possible and sensible comparisons with image 0, and so I compare 0-1, 0-2, 0-3. (I don't want to compare 0-0 because that's comparing the image with itself. Doesn't make sense.)&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/image-comparisons-0.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-16774&quot; /&gt;&lt;figcaption&gt;Excuse the uneven titles!&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Then, I can do all remaining comparisons with image 1: compare 1-2, 1-3. (1-0 comparison has been already done previously as 0-1 so I don't need to worry about that.) &lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-medium&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/image-comparisons-1-705x354.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-16775&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now I'm left with 2-3 comparison because all of the other possible comparisons have been listed previously (or don't make sense as I would be repeating comparisons).&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-medium&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/07/image-comparisons-2-1-705x418.jpeg&quot; alt=&quot;&quot; class=&quot;wp-image-16777&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;How do I turn it into something automated that will be built out depending on the number of images my app is dealing with? Well, I can see that starting with the lowest possible index for image1 (ind1), the values of image2 will vary from one index higher (ind1+1) until the maximum value of index (max(index)). Then I'm moving onto the next index for image1 and repeat the same process for image2:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/image-comparisons-analysis.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-16836&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;With the above as my plan, I can initialise the comparisons table:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Initialise data frame for comparisons
total_comparisons = sum(index)
comparisons_index = range(total_comparisons)
comparisons_columns = &amp;#91;'image1', 'image2', 'ssim']
comparisons_df = pd.DataFrame(index=comparisons_index, columns=comparisons_columns)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Based on my experience, the performance is better when you know how big of an object (here a data frame), you want to build in python. And so I needed to figure out the total number of comparisons I will need to be prepared for. Looking at my simple example with four images and indices of 0, 1, 2, 3, the number of comparisons I needed to do was 3 (for image1 index of 0) + 2 (for image1 index of 1) + 1 (for image1 index of 2). 3+2+1 for indices of 0, 1, 2, 3. Luckily the indices in python start at 0, because the total number of comparisons I need to do is the sum of all indices I have (3+2+1 = 3+2+1+0).&lt;/p&gt;
&lt;p&gt;The first step, then, is to get the total number of comparisons. Now I can build the new index for comparisons table which is done by range(total_comparisons). &lt;em&gt;range&lt;/em&gt; function, when given one argument, is creating a range from 0 to the given number - 1. So that the total number of steps in the created range is equal to the given number.&lt;/p&gt;
&lt;p&gt;Next, I specify the columns I am interested in and initialise an empty dataframe.&lt;/p&gt;
&lt;p&gt;Moving onto filling out the comparisons table with the image combinations I want for my comparisons:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;row = 0
for image1 in index&amp;#91;0:-1]:
    for image2 in range(image1+1,max(index)+1):
        comparisons_df&amp;#91;'image1']&amp;#91;row] = image1
        comparisons_df&amp;#91;'image2']&amp;#91;row] = image2
        row += 1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Previously, I was looping through the rows of the data frame. This time I found it easier to loop through indices for image1 and for image2, and change the row manually. To get it sorted, I initialise the row at 0. Then I start a loop through indices for image1. index[0:-1] will go through all values from 0 (the first one) to the penultimate one (noted in python as -1). Once I have the value for image1, I want to loop through indices for image2. The expression for this loop may look a bit complex but let's break it down.&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;range(image1+1, max(index)+1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I am passing two arguments to &lt;em&gt;range&lt;/em&gt; function, which means it will create a range between the first argument, to the second number - 1:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/range.jpg&quot; alt=&quot;&quot; class=&quot;wp-image-16837&quot; /&gt;&lt;figcaption&gt;An example of &lt;em&gt;range&lt;/em&gt; function with two arguments&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;The first argument is the point where I want to start. Based on my previous analysis it will be the index above than for image1, so &lt;em&gt;image1+1&lt;/em&gt;. The second argument will be where I want to end (&lt;em&gt;max(index)&lt;/em&gt;) increased by 1, so &lt;em&gt;max(index)+1&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Once I'm within the loop for image2, I can fill in the values of image1 and image2 for the current row. The final step is to move to the next row with row += 1. &lt;em&gt;This way of writing it down is a bit faster than writing row = row+1.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;What happens in the next row? The most inner loop will finish first, so python will iterate over the values for image2, and then move on to the next value in image1, create a new list for image2 and go over that again. Until it gets to the last value for image1 and the corresponding last value for image2.&lt;/p&gt;
&lt;h3&gt;Extracting the Threshold&lt;/h3&gt;
&lt;p&gt;One of the things I wanted my app to be able to do was to identify images that are very similar and not only identical duplicates. SSIM is returning values between -1 and 1, where 1 is an identical image.  (I couldn't find what -1 is, but I assume it is exactly opposite, similar to the correlation of -1. Don't quote me on that though.)  I decided to mark images as duplicate if the SSIM index was above a certain threshold. To give the user even more power (dangerous, I know), I added a numeric up and down so that they can specify the threshold whenever they run the app:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/image.png&quot; alt=&quot;&quot; class=&quot;wp-image-16838&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;I use the Text Input tool (no. 1) to have a placeholder for the threshold (set it up to 0.9). Then I added Numeric Up Down (no. 2) with the range of -1 and 1 (possible values of SSIM index) and default value of 0.9. The Action tool (no. 3) updates the threshold value in the text input tool and passes it over to the  Python tool as connection #2.&lt;/p&gt;
&lt;p&gt;In the python tool, I need to read the threshold in with &lt;em&gt;Alteryx.read &lt;/em&gt;function:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Get the threshold
threshold = Alteryx.read(&quot;#2&quot;)&amp;#91;'threshold']&amp;#91;0]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I am accessing the value itself by taking out the content of &lt;em&gt;threshold&lt;/em&gt; column and &lt;em&gt;0-th&lt;/em&gt; row, then assign it to &lt;em&gt;threshold&lt;/em&gt; variable.&lt;/p&gt;
&lt;h3&gt;Running comparisons&lt;/h3&gt;
&lt;p&gt;Seems that I am finally ready to run my comparisons:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Initialise duplicates list and run the SSIM comparisons
duplicates = &amp;#91;]
for comparison_index in comparisons_index:
    image1 = images_df&amp;#91;'image']&amp;#91;comparisons_df&amp;#91;'image1']&amp;#91;comparison_index]]
    image2 = images_df&amp;#91;'image']&amp;#91;comparisons_df&amp;#91;'image2']&amp;#91;comparison_index]]
    
    comparisons_df&amp;#91;'ssim']&amp;#91;comparison_index] = ssim(image1,image2,multichannel=True)
    
    if comparisons_df&amp;#91;'ssim']&amp;#91;comparison_index] &amp;gt;= threshold:
        duplicates.append(comparisons_df&amp;#91;'image2']&amp;#91;comparison_index])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As I don't know how many duplicates I will have, I am starting with an empty list &lt;em&gt;[]&lt;/em&gt;. Then I'm looping through all comparisons, assign image from &lt;em&gt;images_df&lt;/em&gt; to &lt;em&gt;image1&lt;/em&gt; and &lt;em&gt;image2&lt;/em&gt; based on the indices in the comparisons table. Moving onto running the function that returns the ssim index for two images, I have what I need to identify if the images are similar enough to be marked as duplicates. &lt;/p&gt;
&lt;p&gt;The way I decided to handle or assign duplicate flag, was as follows: For every comparison with ssim value of greater than or equal to threshold, add the index of &lt;em&gt;image2&lt;/em&gt; to the duplicates list. If there are are more images that are similar to each other, all but the first one should be marked as duplicates.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Now that I'm writing it up, I think I could optimise the process and limit the number of comparisons even more. I could remove any future comparisons that reference images already known as duplicates. There's always something to improve on :)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In case some images would show up multiple times as duplicates, I wanted to make my duplicate list unique. I was pretty disappointed that it wasn't as straightforward in python as it is in Alteryx (or at least that I didn't find anything as straightforward as the unique tool). What I had to do was to change my list of duplicates to a set - this would result in a unique set of values - then back to list so that I could easily access the duplicate indices:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;unique_duplicates = list(set(duplicates))&lt;/code&gt;&lt;/pre&gt;
&lt;div style=&quot;height:34px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2 id=&quot;createNewLocation&quot;&gt; Create a new location &lt;/h2&gt;
&lt;p&gt;Before I update &lt;em&gt;images_df&lt;/em&gt; I want to create the folder to move all duplicates. (I could do it after updating that table, but I wanted to update it only once the location existed.)&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Make Duplicates folder
current_dir = directory&amp;#91;'Directory']&amp;#91;0]
path = current_dir + 'Duplicates'
try:
    os.mkdir(path)
except OSError:
    print (&quot;Creation of the directory %s failed&quot; % path)
else:
    print (&quot;Successfully created the directory %s &quot; % path)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;First, I assign the directory from connection #1 to the python tool (data from the directory tool) as &lt;em&gt;current_dir&lt;/em&gt;. Adding &lt;em&gt;'Duplicates'&lt;/em&gt; to &lt;em&gt;current_dir&lt;/em&gt; will build a path of the new folder, where I want to move the duplicate images to. I have to tell the local machine to actually create the folder (the path on its own is not enough). The &lt;em&gt;try, except &amp;lt;error&amp;gt;, else&lt;/em&gt; is a way of handling errors in python. (To be honest, I googled &lt;em&gt;creating a folder with python&lt;/em&gt; and found this code on stackoverflow.) Python will try to execute the code in &lt;em&gt;try&lt;/em&gt; section (make the folder based on the path). If there will be the specified error (&lt;em&gt;OSError&lt;/em&gt;), Python will execute the code in the &lt;em&gt;except&lt;/em&gt; section (printing out message that the creation failed). If no such error is raised, Python will move on to &lt;em&gt;else&lt;/em&gt; (printing out the message that the location has been created).&lt;/p&gt;
&lt;p&gt;With the folder finally created, I can update my main table &lt;em&gt;images_df&lt;/em&gt;:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Create new file paths and update duplicate flags
for row in unique_duplicates:
    dest_path = path + &quot;\\&quot; + images_df&amp;#91;'FileName']&amp;#91;row]
    images_df&amp;#91;'NewPath']&amp;#91;row] = dest_path
    images_df&amp;#91;'Duplicate']&amp;#91;row] = True&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This time, I am only going through the indices in the duplicates list. For each duplicate, I am building the destination path which is the &lt;em&gt;Duplicates&lt;/em&gt; folder path combined with the file name, and use it to overwrite the value in &lt;em&gt;NewPath&lt;/em&gt; column. I am also changing the duplicate flag to true.&lt;/p&gt;
&lt;p&gt;The final step regarding the python tool, is to output the result back into the workflow:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;# Output the data to alteryx workflow
output = images_df&amp;#91;&amp;#91;'FullPath','Duplicate','FileName','NewPath']]
Alteryx.write(output, 1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As I don't need all columns from &lt;em&gt;images_df&lt;/em&gt; in my output, I create a new dataframe that has only FullPath, Duplicate, FileName, and NewPath. Then I am writing it to output anchor #1. (Notice &lt;em&gt;Alteryx.write&lt;/em&gt; function takes numbers, not strings as the argument for identifying the output anchor. Something I found a little annoying...)&lt;/p&gt;
&lt;div style=&quot;height:26px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2 id=&quot;moveFiles&quot;&gt; Move duplicates to the new location &lt;/h2&gt;
&lt;p&gt;The last step was to move the images from the original location to the newly created &lt;em&gt;Duplicates&lt;/em&gt; folder. I thought it would be easy but it turned out to be a little challenging. My first try was to do it within the python tool (use it as much as I can!) Unfortunately, I was getting errors that the files I am trying to move are open by another process. I am not 100% sure that's the reason but my thinking was that because these files were open within the same python tool (to read the image information), they were considered as open files. Even though they were not open in a traditional way (as you would open a text file in python to edit its contents) and so I couldn't figure out how to enforce them being closed. As a result, I turned to The Information Lab and Ben came to the rescue once again, suggesting using bash script to get this part done.&lt;/p&gt;
&lt;p&gt;I had a mixed reaction to this. On the one hand, I wasn't too happy about it as I had another step to do and another thing to learn before the app would work. On the other hand, I was very happy about it as I had another thing I could learn :)&lt;/p&gt;
&lt;p&gt;To sort this one out, I had to figure out what are batch scripts, how to write a simple one, how to apply it to multiple images, then how to implement it in alteryx. Again, it took some googling, setting up a simple testing environment, and troubleshooting with my colleagues. Batch scripts are files with a code you would normally execute in the command line. The magic is that you can save them and run them from within Alteryx.&lt;/p&gt;
&lt;p&gt;The script I had to build was not a very complex one. Nevertheless, it went down not without any technical problems... Thanks to &lt;a href=&quot;https://twitter.com/VizMyData&quot;&gt;Jonathan Sherman&lt;/a&gt; who shared his solution which helped me identify issues in my approach.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/image-2.png&quot; alt=&quot;&quot; class=&quot;wp-image-16843&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;I decided to only do it for the duplicate images as for non-duplicates, NewPath (destination) was the same as FullPath (origin). (#1 the filter tool)&lt;/p&gt;
&lt;p&gt;The command line cannot have any spaces within the path, and if it does it needs to be bookended by quotation marks. So in #2 (Formula tool, Update paths) I'm doing just that both for NewPath and FullPath:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;'&quot;' + &amp;#91;NewPath] + '&quot;'&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;'&quot;' + &amp;#91;FullPath] + '&quot;'&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In step #3 (Formula tool, script), I am building a script at the level of each image. Adding a column called &lt;em&gt;script&lt;/em&gt;:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;'MOVE ' + &amp;#91;FullPath] + ' ' + &amp;#91;NewPath]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The summarize tool (#4) is set to concatenate the &lt;em&gt;script&lt;/em&gt; field with the separator of \n (newline character), so that scripts for all files are in a single cell, operation for each file starting on a new line.&lt;/p&gt;
&lt;p&gt;The last step (#5, Run Command tool), saves the script into a file and then executes it. I set it up so that it's save to a temporary file (which should be cleaned after Alteryx is finished), and give it a meaningful name of moveFiles.bat&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/image-3.png&quot; alt=&quot;&quot; class=&quot;wp-image-16844&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This is the place where I was running into issues. It turned out that the set up of output in Write Source [Optional] was the culprit:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2020/08/image-4.png&quot; alt=&quot;&quot; class=&quot;wp-image-16845&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;I knew the file would need to be set to a text file, the bit I missed was that delimiters needed to be set to \0.&lt;/p&gt;
&lt;div style=&quot;height:30px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Surprisingly it has been a short and a long project at the same time. A short one as I managed to get a lot done in a short amount of time. A long one as describing it take a long time, making me realise there was a lot of planning and learning involved (which is great!)&lt;/p&gt;
&lt;p&gt;I really enjoyed building an application that combined the worlds of Python and Alteryx, actually making the most of the two, and learning extra bits such as batch scripts!&lt;/p&gt;
&lt;p&gt;The final app sits on The Information Lab's public alteryx gallery and you can download it &lt;a href=&quot;https://spider.theinformationlab.co.uk/alteryxcloud/#!app/Deduplicating-Images-App/5ede475d35954810882dca21&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As mentioned above, there are a few improvements I would like to make but I am still pretty happy with the current outcome. Let me know if you have other ideas on how to optimise this solution or on improvements I could add!&lt;/p&gt;
&lt;div style=&quot;height:37px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;p&gt;Have you used the python tool yourself? If so, what did you use it for? If not, what &lt;em&gt;would &lt;/em&gt;you use it for? Let me know!&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</content><author><name>Hanna Nykowska</name></author><category term="alteryx" /><summary type="html">New to python tool in alteryx or python in general? Hereâ€™s a step by step description of how I built an app that identifies duplicate images and moves them to a new location. First published on The Information Lab Blog.</summary></entry><entry><title type="html">The Index Trick - London TUG Summer Sessions</title><link href="/index-trick-TUG" rel="alternate" type="text/html" title="The Index Trick - London TUG Summer Sessions" /><published>2020-07-21T00:00:00+00:00</published><updated>2020-07-21T00:00:00+00:00</updated><id>/index-trick-TUG</id><content type="html" xml:base="/index-trick-TUG">&lt;p&gt;Briefly explaining what the Index Trick is all about during London TUG Summer Sessions.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://youtu.be/UG87IqpaAzk?t=4349&quot; target=&quot;\_blank&quot;&gt;First published on YouTube&lt;/a&gt;
&lt;!--more--&gt;&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/UG87IqpaAzk?start=4349&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;</content><author><name>Hanna Nykowska</name></author><category term="tableau" /><category term="videos" /><summary type="html">Briefly explaining what the Index Trick is all about during London TUG Summer Sessions. First published on YouTube</summary></entry><entry><title type="html">Tableau Tip: The INDEX Trick</title><link href="/the-index-trick" rel="alternate" type="text/html" title="Tableau Tip: The INDEX Trick" /><published>2019-12-31T00:00:00+00:00</published><updated>2019-12-31T00:00:00+00:00</updated><id>/the-index-trick</id><content type="html" xml:base="/the-index-trick">&lt;p&gt;I wanted to share something that I have found very useful in the past year. What I have in mind, is something I call â€˜the Index trickâ€™.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2019/12/31/tableau-tip-the-index-trick/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;It is the last day of 2019 and I wanted to share something that I have found very useful in the past year. What I have in mind, is something I call 'the Index trick'. Before I start, I wanted to give a shout to &lt;a href=&quot;https://twitter.com/cjdaffern&quot;&gt;Charlie Daffern&lt;/a&gt; as she suggested it to me when I first needed it but then I have found many other use cases for this technique.&lt;/p&gt;
&lt;p&gt;The Index trick is using the INDEX() function as a filter. It is often rather easy to use. However, the configuration of the table calculation can be tricky (something to keep in mind).&lt;/p&gt;
&lt;p&gt;I'll first explain the index trick on an example and then will show a few ways of setting it up, and give more use cases. If you're interested in the last bit, jump to the end of this post.&lt;/p&gt;
&lt;h2&gt;Example&lt;/h2&gt;
&lt;p&gt;Let's say you use a measure filter to see only the products that have sales above a certain threshold and count those products. As measure filters are late in the &lt;a href=&quot;https://help.tableau.com/current/pro/desktop/en-us/order_of_operations.htm&quot;&gt;order of operations&lt;/a&gt; (see below), the COUNTD function will be performed &lt;strong&gt;before&lt;/strong&gt; the filter on sales is applied. This means the count of products will take all products into account and will be incorrect. Because it is a measure filter (after all we need a sum of sales), it cannot be added to context.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/12/image.png&quot; alt=&quot;&quot; class=&quot;wp-image-15818&quot; /&gt;&lt;/figure&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/12/image-1.png&quot; alt=&quot;&quot; class=&quot;wp-image-15819&quot; /&gt;&lt;figcaption&gt;The above also doesn't split the sales for each product&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;A way around it is to have the Product Name on detail, but this results in many 1s while we just want a single number:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/12/image-2-1024x598.png&quot; alt=&quot;&quot; class=&quot;wp-image-15820&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This approach, however, shows us how many products meet our filter conditions. In the bottom left corner, you can see there are only 747 Product Names with sales equal or greater to $500, compared to 1850 previously.&lt;/p&gt;
&lt;p&gt;To change the 1s into the total number, we need to wrap a TOTAL function around CNTD(Product Name):&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/12/image-3-1024x580.png&quot; alt=&quot;&quot; class=&quot;wp-image-15821&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This is great because now we get the right number. Except that it's repeated 746 unnecessary times. Here we get to the Index trick and I'll show a few ways of setting it up.&lt;/p&gt;
&lt;h3&gt;Option 1) INDEX() calculation as filter&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;Double-click on the marks shelf and just type INDEX(). This will add it to detail. &lt;/li&gt;&lt;li&gt;Change that to label, so that you can see how the Index is assigned. &lt;/li&gt;&lt;li&gt;Right-click on the INDEX() -&amp;gt; Calculate using -&amp;gt; Product Name. Now the 1s change to incrementing numbers. &lt;/li&gt;&lt;li&gt;With the Index function set up correctly, drag it to the filter shelf -&amp;gt; At Most -&amp;gt; change the number to 1. You should now have only one number visible, as per GIF below:&lt;/li&gt;&lt;/ul&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/12/adhoc-filter.gif&quot; alt=&quot;&quot; class=&quot;wp-image-15822&quot; /&gt;&lt;/figure&gt;
&lt;h3&gt;Option 2) INDEX() = 1&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;Another way to get the same affect is to type in INDEX() = 1 instead of INDEX(). This will be a logic statement and so first you should see True everywhere (after changing the pill assignment to label that is!)&lt;/li&gt;&lt;li&gt;After setting Calculate using -&amp;gt; Product Name, only the first mark should have the value of True, the other ones should be False&lt;/li&gt;&lt;li&gt;Move the created pill to filters card and tick True. You should get the same result as in Option 1&lt;/li&gt;&lt;/ul&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/12/logical-filter.gif&quot; alt=&quot;&quot; class=&quot;wp-image-15823&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h2&gt;Notes&lt;/h2&gt;
&lt;p&gt;Of course, both options can be used with a saved calculated field as opposed to an ad-hoc calculation (double-clicking on the marks card).&lt;/p&gt;
&lt;p&gt;In Option 2, instead of hard-coding (typing in a specific number) the index value, you could use a parameter to have more flexibility&lt;/p&gt;
&lt;h2&gt;Use cases&lt;/h2&gt;
&lt;p&gt;The above example shows how useful the Index trick is when the task in question can be quite complex and the order of operations forces you to be more creative. (I was planning to say it gets in the way, but it's not really the order of operations' fault...)&lt;br /&gt;Whenever you need to play around with table calculations, such as TOTAL, or Window_&amp;lt;aggregation&amp;gt; functions, the Index trick can be useful to get rid of the repeated values.&lt;/p&gt;
&lt;p&gt;Another situation is when you Hide some values. It is likely, you will be able to use the Index trick instead. The advantage of using the Index trick instead of hiding marks is that it's much more visible. This, in turn, helps with documentation and handover of your work. I'm sure those continuing with your work will be grateful for a visible Index filter instead of hiding values away!&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Let me know where you use the index trick yourself!&lt;/p&gt;
&lt;p&gt;That's it from me in 2019. Have a fantastic next decade!&lt;/p&gt;</content><author><name>Hanna Nykowska</name></author><category term="tableau" /><summary type="html">I wanted to share something that I have found very useful in the past year. What I have in mind, is something I call â€˜the Index trickâ€™. First published on The Information Lab Blog.</summary></entry><entry><title type="html">How to build Chord Chart in Tableau with Table Calculations and LODs</title><link href="/chord-chart-with-table-calcs-and-lods" rel="alternate" type="text/html" title="How to build Chord Chart in Tableau with Table Calculations and LODs" /><published>2019-11-07T00:00:00+00:00</published><updated>2019-11-07T00:00:00+00:00</updated><id>/chord-chart-with-table-calcs-and-lods</id><content type="html" xml:base="/chord-chart-with-table-calcs-and-lods">&lt;p&gt;Want to build a chord chart but donâ€™t have access to fancy data preparation tools? I got you covererd!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2019/11/07/chord-chart-with-table-calcs-and-lods/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;A chord chart (or schemaball) can be an interesting way to show how strongly two categories are related. Usually, they are pretty tricky to make and can require a lot of data prep that is not always available to everyone. This is the problem I have come across recently: the client wanted a chord chart but they don't have access to Alteryx (which would be what I'd use to build the shapes needed) so I thought I'd try and build this kind of chart with table calculations. I made it work and now I'm here to share it with you!&lt;/p&gt;
&lt;p&gt;For the purpose of this blog, I'm using &lt;a href=&quot;http://bit.ly/2NMUFes&quot;&gt;data&lt;/a&gt; on how many people commute between London boroughs (from place of residence to place of work)&lt;/p&gt;
&lt;h2&gt;Data&lt;/h2&gt;
&lt;p&gt;Let's be honest, the data will still need to be in the right format, but this format should be fairly sensible. Let's say you start with a data set that has a start point (Place of Residence), end point (Place of Work), and weight of the connection (Number of Commuters). To make the chord chart work, you will also need a row ID (actually it just needs something that can be used as an identifier for each connection). If it's something that you can get from your database, that's great. If you can't, create a calculated field:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Row ID&lt;/strong&gt; (given [Start Point] and [End Point] are strings)&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;&amp;#91;Start Point] + &amp;#91;End Point]&lt;/code&gt;&lt;/pre&gt;
&lt;div style=&quot;height:23px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3&gt;Formatting the data in Tableau&lt;/h3&gt;
&lt;p&gt;OK, so we have start point, end point, weight of the connection, and row ID. Lovely.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1572964029/Chord%20chart%20blog/original_data.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Highlight Start and End points, right-click â†’ pivot. This will reshape the data so that all boroughs (in my case) will be in one column and there will be another column indicating if it's a start or end point. I renamed Pivot Field Values to Borough but you may decide to go with something more appropriate to your data:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1572964868/Chord%20chart%20blog/pivot_the_data.gif&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now, go to a new sheet and create a calculated field called Path - it will specify the direction:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;If &amp;#91;Pivot Field Names]='Start Point'
then 1
elseif &amp;#91;Pivot Field Names]='End Point'
then 2
end&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This field will by default end in Measures, leave it there for now.&lt;/p&gt;
&lt;p&gt;That's it in terms of data prep!&lt;/p&gt;
&lt;div style=&quot;height:51px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Chord chart with Table Calcs and LODs!&lt;/h2&gt;
&lt;p&gt;This solution isnâ€™t entirely straightforward and you may need to modify it to fit your data set. However, this guide will teach you the concepts required which you can pick up and modify to suit your needs.&lt;/p&gt;
&lt;p&gt;With the data prep done, weâ€™re ready to actually begin building the Chord chart in Tableau. If your data format differs significantly then you may need further table calculations. However, the steps below should work with data that is reasonably similar.&lt;/p&gt;
&lt;p&gt;OK, let's get to it, shall we?&lt;/p&gt;
&lt;h3&gt;Point positions&lt;/h3&gt;
&lt;p&gt;First, we need to create a few calculated fields to find the right angle. What do we need an angle for? Tableau uses &lt;a href=&quot;https://mathinsight.org/cartesian_coordinates&quot;&gt;cartesian coordinates&lt;/a&gt; which is great for many types of charts. In order to build the chord chart, however, we need to have points placed on the edge of a circle. For this, &lt;a href=&quot;https://mathinsight.org/polar_coordinates&quot;&gt;polar coordinates&lt;/a&gt; work better - we only need angle and radius to find the position of a point. Thankfully, we can use trigonometry to translate polar coordinates into cartesian ones.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1572968411/Chord%20chart%20blog/Cartesian_vs_polar_coordinates.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Let's create a calculated field called Total Positions - it will help calculate the smallest angle (1/[Total Positions]).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Total Positions&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;{COUNTD(&amp;#91;Borough])}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This will return the number of distinct positions you will have in the chord chart. I tried using a table calculation for it instead. That, however, turned to be much more complex to set up than using a fixed (on nothing) LOD instead.&lt;/p&gt;
&lt;p&gt;Next calculated field will be Order and it's something to just assign a number to each position.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Order&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;INDEX()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, it's just an INDEX function. (The trick will be to set it up correctly with all of the other calculations in the view! But worry not, I've got you covered.)&lt;/p&gt;
&lt;p&gt;Now that we have [Total Positions] and [Order] we can finally add another calculated field, Angle.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Angle&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;( (2 * PI()) / max(&amp;#91;Total Positions]) ) * &amp;#91;Order]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There is quite a lot going on. Let's break it down. 2 Ï€  is a full circle (360Â°, tableau trigonometric functions use radians and so we need 2 Ï€  instead of 360Â°). Total Positions should have the same value for all rows in the data so it requires some aggregation, max() should be fairly computationally-light and will give us the right value. Full circle divided by all positions will return the smallest angle. Multiplying that by Order will give us the angle values for all positions.&lt;/p&gt;
&lt;p&gt;OK! We have our angles calculated. To check that the calculated fields work, drag Borough (or whatever you use to identify different positions) and Order to the Rows shelf, then drag Angle to the Columns shelf. The image below is what you should get. You may replace 2 Ï€  with 360Â° if sense checking is easier in degrees (it was for me!) but make sure to go back to radians before we continue. Another alternative would be to use ([Order] - 1) in the Angle calculation instead of [Order]. Then the first position would start with an angle of 0 and be in the middle as opposed to a few degrees to the right.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1572973510/Chord%20chart%20blog/angle%20check.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now that we have the angles calculated, we can write translation calculations.&lt;/p&gt;
&lt;p&gt;Looking back at the combination of polar and cartesian coordinates we need two fields:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;X&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;cos(&amp;#91;Angle])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Y&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;sin(&amp;#91;Angle])&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can skip the radius because we want it to be the same for all points. Skipping the radius is equivalent to assigning it a value of 1.&lt;/p&gt;
&lt;p&gt;Drag X to columns and Y to rows and Borough to detail. This doesn't seem encouraging. We can see there are 32 marks but they all seem to be in the same place! Fear not, it's the table calculations that require setting up.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573040047/Chord%20chart%20blog/coordinates%20check.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Right-click on X â†’ Edit Table Calculation â†’ Compute Using â†’ Specific Dimensions â†’ tick Borough (or your equivalent). This already should end up in a circle but repeat the same for Y. In the gif below, you can also notice that the positions are starting not from the top, like a clock face, but rather from 3 o'clock (horizontal axis) in the anti-clockwise direction.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573042078/Chord%20chart%20blog/positions_in_circle_rqgvfp.gif&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573041948/Chord%20chart%20blog/Cartesian_vs_polar_angle_direction.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;To accommodate for the above, we simply need to swap columns with rows. For those who like a diagram, here's a comparison of the two:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573043311/Chord%20chart%20blog/Cartesian_vs_polar_change_of_direction.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;For the practical minds, just click Swap Rows and Columns or hit CTRL+W:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573043429/Chord%20chart%20blog/swap%20rows%20and%20columns.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;You can change the assignment of Borough pill from detail to text to show the labels.&lt;/p&gt;
&lt;p&gt;Here's what I have so far:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573046931/Chord%20chart%20blog/circle.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;div style=&quot;height:33px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;Connect the dots&lt;/h2&gt;
&lt;p&gt;Great, the boroughs are in the right place. Let's now draw the lines between them.&lt;/p&gt;
&lt;p&gt;Hit CTRL and drag pill X to the right of itself. Now you should have two X pills on rows. Change the mark type on X(2) from automatic to line. It may look like a mess but let's keep going.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573047207/Chord%20chart%20blog/two%20axes%20circles%20and%20line.png&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt; Partaaay &lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;On X(2) (line), drag Path onto Path (see what I did there) on marks card:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573052355/Chord%20chart%20blog/Path%20on%20path.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now drag Row ID onto detail on X(2) marks card. Oh no! what happened to our circular points? Table calcs, that's what happened.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573052485/Chord%20chart%20blog/row%20ID%20on%20detail.png&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;To fix that, right-click on the X pill on the right â†’ Edit Table Calculation â†’ Compute Using â†’ Specific Dimensions â†’ make sure both Borough and Row ID are ticked â†’ At the level â†’ Borough. Ta-da!&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573052985/Chord%20chart%20blog/chord_chart.gif&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Alright, we're almost there. You already have dots for one axis, now let's do a dual-axis to combine the two views. Right-click on any of the X pills â†’ Dual Axis. Then make sure you synchronise the axes and hide them. You may have noticed that the chord chart disappeared after selecting Dual Axis! Just remove Measure Names from colour (either on the marks card for line chart or on the marks card for All). Finally, change Borough assignment from Label to Detail on marks card for line chart.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573056008/Chord%20chart%20blog/chord_chart_dual_axis.gif&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;figure class=&quot;aligncenter&quot;&gt;&lt;img src=&quot;https://media.giphy.com/media/UmBdALbYTmCJ2/giphy.gif&quot; alt=&quot;&quot; /&gt;&lt;figcaption&gt;via GIPHY&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h1&gt;Fun part - AKA formatting&lt;/h1&gt;
&lt;p&gt;Fantastic, we have our chord chart ready to be formatted!  Iâ€™ll leave this part to you. However, in my example, you can see how I use weight to thicken chords with a strong connection and colour to highlight the direction of connections. &lt;/p&gt;
&lt;p&gt;I have also joined my original (not pivoted) data to the pivoted data. Then I created a parameter from Borough and a calculated field to distinguish between from and to and connections that are not related. With parameter actions, you can now click on any of the circles to adjust the colouring for that borough. Pretty cool.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://res.cloudinary.com/dk8jxrhv8/image/upload/v1573125270/Chord%20chart%20blog/viz_in_action.gif&quot; alt=&quot;&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;You can find my workbook on &lt;a href=&quot;https://public.tableau.com/profile/hanna.nykowska#!/vizhome/ChordchartwithtablecalcsandLODs/Dashboard&quot;&gt;Tableau Public&lt;/a&gt;.&lt;/p&gt;</content><author><name>Hanna Nykowska</name></author><category term="tableau" /><summary type="html">Want to build a chord chart but donâ€™t have access to fancy data preparation tools? I got you covererd! First published on The Information Lab Blog.</summary></entry><entry><title type="html">Connect to Spotify API with Alteryx</title><link href="/connect-to-spotify-api-with-alteryx" rel="alternate" type="text/html" title="Connect to Spotify API with Alteryx" /><published>2019-08-07T00:00:00+00:00</published><updated>2019-08-07T00:00:00+00:00</updated><id>/connect-to-spotify-api-with-alteryx</id><content type="html" xml:base="/connect-to-spotify-api-with-alteryx">&lt;p&gt;The authentication process for Spotify API is a bit tricky. I thought Iâ€™d make your life easier so that you could start using this API yourself!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2019/08/07/connect-to-spotify-api-with-alteryx/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;With the recent &lt;a href=&quot;https://public.tableau.com/en-us/s/blog/2019/07/check-out-2019-iron-viz-entries-music-data&quot;&gt;Iron Viz feeder focused&lt;/a&gt; around the topic of music, many people have started looking into &lt;a href=&quot;https://developer.spotify.com/documentation/web-api/&quot;&gt;Spotify API&lt;/a&gt;, including myself. I actually did use data from Spotify API for &lt;a href=&quot;https://public.tableau.com/profile/hanna.nykowska#!/vizhome/whatssospecialaboutmusic/Dashboard&quot;&gt;my Iron Viz entry&lt;/a&gt;. The authentication process is a bit tricky and so I thought I'd make your life easier so that you could start using this API yourself!&lt;/p&gt;
&lt;blockquote class=&quot;wp-block-quote is-style-default&quot;&gt;&lt;p&gt;&lt;em&gt;Disclaimer&lt;/em&gt;&lt;/p&gt;&lt;p&gt;This solution uses Client Credentials Flow and allows you to connect to Spotify API data but &lt;strong&gt;not&lt;/strong&gt; the user information. This means, you &lt;strong&gt;can't &lt;/strong&gt;use this authorization method to connect to Users Profile, Personalization, Player and other end points that are based on user data. You &lt;strong&gt;can&lt;/strong&gt; still search/access artist, album, track, etc. information.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3&gt;Get Client ID and Client Secret&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;Create a Spotify user account (it can be Free or Premium), I used my personal one.&lt;/li&gt;&lt;li&gt;Go to Spotify Developer &lt;a href=&quot;https://developer.spotify.com/dashboard&quot;&gt;Dashboard&lt;/a&gt;, log in and accept &lt;a href=&quot;https://developer.spotify.com/terms&quot;&gt;Developer Terms of Service&lt;/a&gt;.&lt;/li&gt;&lt;li&gt;Create an app  (in 'What are you building?' section I chose 'I don't know'). &lt;/li&gt;&lt;li&gt;Once you open your app, you should be able to see Client ID and Secret:&lt;/li&gt;&lt;/ol&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-37.png&quot; alt=&quot;&quot; class=&quot;wp-image-14869&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;More on getting started with Spotify API you can find &lt;a href=&quot;https://developer.spotify.com/documentation/web-api/quick-start/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Get token (ready-to-use macro)&lt;/h3&gt;
&lt;p&gt;Now that you have client credentials, you would need to connect to the Spotify API and get a token. To make your life easier, I built a macro, that takes the client credentials and return the token together with the time until it's active. For more on how does the macro actually work, go &lt;a href=&quot;https://www.theinformationlab.co.uk/?p=14837#behindthescenes&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Download the macro &lt;a href=&quot;https://gallery.alteryx.com/#!app/Get%2BToken%2Bfor%2BSpotify%2BAPI/5d4af9948a933712d02145a2&quot;&gt;from the Gallery&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Import it into the workflow&lt;/li&gt;&lt;/ul&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-39.png&quot; alt=&quot;&quot; class=&quot;wp-image-14872&quot; /&gt;&lt;/figure&gt;
&lt;ul&gt;&lt;li&gt;Copy and paste your Client ID and Client Secret. Client Secret should be masked while ID visible&lt;/li&gt;&lt;/ul&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-38.png&quot; alt=&quot;&quot; class=&quot;wp-image-14871&quot; /&gt;&lt;/figure&gt;
&lt;ul&gt;&lt;li&gt;Run the macro, it will return an Authorization field that you can use as a header in a download tool and how long the token will be active for&lt;/li&gt;&lt;/ul&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-40.png&quot; alt=&quot;&quot; class=&quot;wp-image-14873&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;I recommend using cache and run so that you don't have ping the API when you're developing your workflow. &lt;/p&gt;
&lt;h3&gt;Use Spotify API&lt;/h3&gt;
&lt;p&gt;Now that you have your token, you can finally use Spotify API! &lt;a href=&quot;https://developer.spotify.com/documentation/web-api/reference/&quot;&gt;Web API Reference&lt;/a&gt; lists different endpoints you can connect to with examples. Let's demonstrate a simple set up. &lt;/p&gt;
&lt;p&gt;I chose Browse endpoint as it doesn't require any additional parameters. The URL to get a list of categories in Browse is&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;https:&amp;#47;&amp;#47;api.spotify.com/v1/browse/categories&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;use text input to start your workflow and name the field with the URL just &lt;em&gt;URL&lt;/em&gt;&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-41.png&quot; alt=&quot;&quot; class=&quot;wp-image-14875&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Then append the results of the Get Token macro and drag in the download tool. In its settings, make sure to choose the right field in URL selection and uncheck the Encode URL text box:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-42.png&quot; alt=&quot;&quot; class=&quot;wp-image-14876&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;In Headers, just tick Authorization and it this situation that should do!&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-43.png&quot; alt=&quot;&quot; class=&quot;wp-image-14877&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;If want to pass any parameters (see below), you'll need to use the Payload tab in the download settings:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-44.png&quot; alt=&quot;&quot; class=&quot;wp-image-14878&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The data will be returned as JSON and will require some extra parsing (JSON Parse will save you a lot of work!). Good luck and have fun playing around with Spotify API!&lt;/p&gt;
&lt;div style=&quot;height:20px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3 id=&quot;behindthescenes&quot;&gt;Behind the scenes: how does the Get Token macro work?&lt;/h3&gt;
&lt;p&gt;This section might be useful if you want to recreate what I did or simply understand what is required.&lt;/p&gt;
&lt;p&gt;First I concatenate  clientID + ':' + clientSecret. Then I encode that new string with a base64 encoder. I create a new Authorization field with 'Basic &amp;lt;encoded credentials&amp;gt;' inside. &lt;/p&gt;
&lt;p&gt;I can now connect to &lt;a href=&quot;https://accounts.spotify.com/api/token&quot;&gt;https://accounts.spotify.com/api/token&lt;/a&gt;. The Encode URL text tick box needs to be unchecked. I add Authorization header (just as described above). In Payload, I change the HTTP action to POST and add a query parameter &lt;em&gt;grant_type&lt;/em&gt; with value &lt;em&gt;client_credentials&lt;/em&gt;:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-46.png&quot; alt=&quot;&quot; class=&quot;wp-image-14880&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Then I check if the response is 200 code, which means it's OK. If it's not, it will send an error to let the user know. I'm also preparing a new Authorization field for the use with API endpoints as well as calculating when will the token expire based on the computer's time.&lt;/p&gt;
&lt;p&gt;That's the workflow:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/08/image-47-1024x483.png&quot; alt=&quot;&quot; class=&quot;wp-image-14883&quot; /&gt;&lt;/figure&gt;</content><author><name>Hanna Nykowska</name></author><category term="alteryx" /><summary type="html">The authentication process for Spotify API is a bit tricky. I thought Iâ€™d make your life easier so that you could start using this API yourself! First published on The Information Lab Blog.</summary></entry><entry><title type="html">Tableau Tip: Highlight Table with Info Icons</title><link href="/tableau-tip-highlight-table-with-info-icons" rel="alternate" type="text/html" title="Tableau Tip: Highlight Table with Info Icons" /><published>2019-07-23T00:00:00+00:00</published><updated>2019-07-23T00:00:00+00:00</updated><id>/tableau-tip-highlight-table-with-info-icons</id><content type="html" xml:base="/tableau-tip-highlight-table-with-info-icons">&lt;p&gt;Oh, so you want detailed data in form of highlight table that includes info button for each row? I got you covered!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2019/07/23/tableau-tip-highlight-table-with-info-icons/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;Let's say you want to give your audience detailed data in form of a table. At the same time, you want to add colour but also and information button, which makes it obvious that you can hover over it for more details. In short, you want something like this:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-49.png&quot; alt=&quot;&quot; class=&quot;wp-image-14606&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;To have the names of the fields present in the table, you'll need to do a bit of trick, but I'll walk you through it step-by-step. In this example, I'm using Sample Superstore available with Tableau Desktop.&lt;/p&gt;
&lt;h3&gt;1. Build the table&lt;/h3&gt;
&lt;p&gt;First, we just want to have the table ready. Go ahead an put the following fields onto Rows shelf:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-50.png&quot; alt=&quot;&quot; class=&quot;wp-image-14608&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Product ID is by default hidden. To show all hidden fields, click on the small arrow next to &lt;strong&gt;Dimensions&lt;/strong&gt; -&amp;gt; Show Hidden Fields:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-51.png&quot; alt=&quot;&quot; class=&quot;wp-image-14609&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;You should end up with something similar:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-52-1024x595.png&quot; alt=&quot;&quot; class=&quot;wp-image-14610&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now, double-click on Profit, Quantity and Sales. This should do a few things. Instead of just the measures on the columns, there is Measure Names, Measure Values are on text and three measures that were clicked on are on the Measure Values tab:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-53.png&quot; alt=&quot;&quot; class=&quot;wp-image-14611&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;We have our table.&lt;/p&gt;
&lt;h3&gt;2. Change it to a highlight table&lt;/h3&gt;
&lt;p&gt;Now that we have the values in the table, we want to help the audience get the message easier. To do that, hit ctrl and drag Measure Values onto colour. This will change the colour of the text which is not exactly what we want. &lt;/p&gt;
&lt;p&gt;To change it into a highlight table, change the mark type to square. Now, we do have a background for each cell, but there's only a single colour legend. The problem with this is that Profit will range between negative and positive values, Sales will have only positive but might have very high positive values while quantity will have values of tens, maybe. To separate the colours, right-click on Measure Values assigned to colour -&amp;gt; Use Separate Legends:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-54.png&quot; alt=&quot;&quot; class=&quot;wp-image-14612&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This will separate the legends by Measure Names and you can adjust them by right-clicking on the legends -&amp;gt; Edit colours.&lt;/p&gt;
&lt;p&gt;You should have something like this:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-55.png&quot; alt=&quot;&quot; class=&quot;wp-image-14613&quot; /&gt;&lt;/figure&gt;
&lt;h3&gt;3. The trick&lt;/h3&gt;
&lt;p&gt;Ok, here we go. Double-click on the white space next to Measure Names on Columns shelf and type in avg(0). Double-click on the white space next to the new green pill and type in avg(0.5). Then right-click on either of the new green pills -&amp;gt; Dual Axis. You might be thinking we're breaking our beautiful highlight table, but bear with me. This is the view for now:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-56.png&quot; alt=&quot;&quot; class=&quot;wp-image-14614&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;On avg(0.5) tab on Marks card, get rid of any Measure Values, as nothing else was there, it should be empty now:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-57.png&quot; alt=&quot;&quot; class=&quot;wp-image-14615&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Compared to the previous photo, you can see that now there are four measure-related columns, despite having only three measures on the Measure Values card. The name of the new column is not exactly elegant, so right-click on it and hit Edit Alias and change avg(0.5) to Information:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-58.png&quot; alt=&quot;&quot; class=&quot;wp-image-14616&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Right-click on any of the axes -&amp;gt; Synchronise Axis. Right-click again -&amp;gt; Edit Axis then change range to fixed from 0 to 1:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-59.png&quot; alt=&quot;&quot; class=&quot;wp-image-14617&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now right-click on the axes and unselect Show Header. &lt;/p&gt;
&lt;p&gt;Ok, we're almost there. &lt;/p&gt;
&lt;p&gt;On avg(0.5) tab on Marks card, change the marks type to shape. Create a new calculated field called Dummy (or whatever you'd like) and type in&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;''&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is only an empty string as we need an actual field to have more control over the shape and its colour. Drag new Dummy field onto colour and shape and adjust it to your preferences. Depending on your available shapes and selected colour, your view will be probably slightly different to mine:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-60.png&quot; alt=&quot;&quot; class=&quot;wp-image-14618&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now let's rebuild our highlight table.&lt;/p&gt;
&lt;p&gt;On the avg(0) tab on the Marks card, change the mark type to Gantt Bar. Double-click on the white space on the tab and type in avg(1), then move it to size. This will create a colour coded background, almost like in the highlight table we've had previously. Click on the size on this tab and move the slider to the right, it will fill the cell vertically:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-61.png&quot; alt=&quot;&quot; class=&quot;wp-image-14619&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The last thing is to get rid of the grid lines. Go to Format -&amp;gt; Lines. Grid Lines says None but don't believe it and re-set it to None, and the grid lines should disappear! &lt;/p&gt;
&lt;p&gt;Now you can add whatever information you'd like to have in the tooltip on the information icon. You can either have the same tooltips for the other measures or disable the tooltips for highlight table by deleting text from tooltip for Gantt Bar mark.&lt;/p&gt;
&lt;p&gt;There you go! Thanks for reading :)&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-62.png&quot; alt=&quot;&quot; class=&quot;wp-image-14620&quot; /&gt;&lt;/figure&gt;</content><author><name>Hanna Nykowska</name></author><category term="tableau" /><summary type="html">Oh, so you want detailed data in form of highlight table that includes info button for each row? I got you covered! First published on The Information Lab Blog.</summary></entry><entry><title type="html">How to: Automated Alteryx Reports</title><link href="/automated-alteryx-reports" rel="alternate" type="text/html" title="How to: Automated Alteryx Reports" /><published>2019-07-02T00:00:00+00:00</published><updated>2019-07-02T00:00:00+00:00</updated><id>/automated-alteryx-reports</id><content type="html" xml:base="/automated-alteryx-reports">&lt;p&gt;Say you have data that gets regularly updated and you need to send those updates to multiple people. Build automated reports with Alteryx!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/2019/07/02/how-to-automated-alteryx-reports/&quot; target=&quot;\_blank&quot;&gt;First published on The Information Lab Blog.&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;
&lt;p&gt;&lt;strong&gt;Why bother?&lt;/strong&gt; Let's say you have data that gets regularly updated and you need to send those updates to multiple people. What you can do is build an Alteryx workflow that creates reports with the relevant data and sends it via email to selected people. Furthermore, if you have Alteryx Server, you can upload the workflow onto the Server and schedule it so that the reports are updated and sent automatically.&lt;/p&gt;
&lt;p&gt;If you want to have a look at a specific tool, here's the list of what is covered in the blog post:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#table&quot;&gt;Table&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#map&quot;&gt;Report Map&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#static-text&quot;&gt;Report Text&amp;nbsp;Static&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#dynamic-text&quot;&gt;Report Text Dynamic&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#layout&quot;&gt;Layout&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#render&quot;&gt;Render&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.theinformationlab.co.uk/?p=13874&amp;amp;#email&quot;&gt;Email&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;h3&gt;Scenario&lt;/h3&gt;
&lt;p&gt;Instead of talking in general terms, let's look at a specific scenario. You should be able to apply similar logic to your situation.&lt;/p&gt;
&lt;p&gt;Let's imagine we are working for a SuperStore (Sample Superstore data available with Tableau) and we want to send out monthly updates on year-to-date performance to market managers. We have four markets (otherwise known as Regions): East, West, Central, South. In the monthly updates, we were told to include YTD sales and profit for the Region in question and information on underperforming cities by Categories. Underperforming cities are defined as those with YTD profit below -$500.&lt;/p&gt;
&lt;p&gt;This is the report I built for one of the Regions using Alteryx:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-5.png&quot; alt=&quot;&quot; class=&quot;wp-image-13900&quot; /&gt;&lt;/figure&gt;
&lt;div style=&quot;height:43px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h2&gt;The process&lt;/h2&gt;
&lt;p&gt;The general, high-level overview of the process is as follows:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-3.png&quot; alt=&quot;&quot; class=&quot;wp-image-13897&quot; /&gt;&lt;/figure&gt;
&lt;blockquote class=&quot;wp-block-quote&quot;&gt;&lt;p&gt;&lt;strong&gt;Intro to reporting in Alteryx.&lt;/strong&gt; Any element in the report will most likely need its own reporting tool [step 3 in the process above]. On top of that, the outputs of these reporting tools will need to be combined using layout tools [step 4]. I think of the instances of layout tools as containers, either horizontal or vertical (no other options available). The output of a layout tool can also be an input into another layout tool, creating nested containers. When building an Alteryx report, try to identify the building blocks and break them down to basic elements. This will help you figure out how to combine these elements using layout tools. Once the report is put together, you can save it as a file (render tool) or email it (email tool) [step 5].&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The first two steps will strongly depend on the task you are dealing with. In the case of the outlined scenario, I'm connecting to two files: one with all of the data (Sample - Superstore, users of Tableau should be quite familiar with this one) and one that has information on the city locations in the USA. (The latter can be accessed from &lt;a href=&quot;https://simplemaps.com/data/us-cities&quot;&gt;https://simplemaps.com/data/us-cities&lt;/a&gt;.) I joined the files so that I can plot the underperforming cities' locations on a map.&lt;/p&gt;
&lt;p&gt;In order to prepare the data, I created a YTD flag - a field that checks if the date is from the same year as &lt;em&gt;today&lt;/em&gt; and before &lt;em&gt;today&lt;/em&gt;. (If the data is only available up until &lt;em&gt;today&lt;/em&gt; then you may not need to check the latter. I would, however, recommend it. It's an extra step but will prove helpful in the testing phase, at least the numbers should make more sense.) As for &lt;em&gt;today&lt;/em&gt;, the data in Sample -Superstore I'm using goes only up to 30-12-2018 so I created a &lt;em&gt;today&lt;/em&gt; field where I hard-code what I want to use as 'today'. This technique might be useful during the development of the workflow. When the workflow goes live, change the hard-coded date into DateTimeToday():&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;ToDate('2018-11-01')
//Use the below instead when the workflow goes live:
//DateTimeToday()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Make sure that the data type is set to Date.&lt;/p&gt;
&lt;div style=&quot;height:24px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;p&gt;After filtering out rows that don't meet YTD requirement I just used basic tools to get the values we were asked for. Here are my steps 1 and 2:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-4.png&quot; alt=&quot;&quot; class=&quot;wp-image-13898&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Important thing to remember is that you will need to have your data ready for the reports, so all calculation need to be performed before creating reporting fields.&lt;/p&gt;
&lt;h3&gt;Build the Report Fields&lt;/h3&gt;
&lt;p&gt;Step 3 is to build a reporting field for every element you want to have in the report. Looking back at the report, we have:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Report header with a photo&lt;/li&gt;&lt;li&gt;Region header&lt;/li&gt;&lt;li&gt;YTD Sales&lt;/li&gt;&lt;li&gt;YTD Profit&lt;/li&gt;&lt;li&gt;Map header&lt;/li&gt;&lt;li&gt;Map with a legend for underperforming cities&lt;/li&gt;&lt;li&gt;Within each category:&lt;ul&gt;&lt;li&gt;Category header&lt;/li&gt;&lt;li&gt;YTD Sales&lt;/li&gt;&lt;li&gt;YTD Profit&lt;/li&gt;&lt;li&gt;Table with information on underperforming cities&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;p&gt;Each of the above will need its own report field. When I was building my workflow, I split this part into four sections: Table by City; Map with its header; Category Level and Region Level Headers.&lt;/p&gt;
&lt;div style=&quot;height:25px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h4 id=&quot;table&quot;&gt;Table by City&lt;/h4&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-43.png&quot; alt=&quot;&quot; class=&quot;wp-image-14222&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This is the easiest section and it uses only a single reporting tool.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-37.png&quot; alt=&quot;&quot; class=&quot;wp-image-14213&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;First, I'm using a Select Tool to rename the fields I want to include in the table so that the headings on the report are formatted correctly (title case, correct spelling). This can be also done in the Table Tool itself. &lt;/p&gt;
&lt;p&gt;As the data will be presented as it is, I used the sort tool to make sure the profit is in ascending order. (The report is on underperforming cities, so it makes sense to show those with the lowest profit first. In other situations, alphabetical order could be more appropriate and this is something to discuss with the stakeholders: what are they interested in the most.)&lt;/p&gt;
&lt;h5&gt;Table&lt;/h5&gt;
&lt;p&gt;Once the data is in the right order, we can drag in the Table Tool.&lt;/p&gt;
&lt;p&gt;Keep the Table Mode as &lt;em&gt;Basic&lt;/em&gt;. In the Group By section, check the Category and Region boxes - we want to have separate reports for each Region and within those reports, separate tables for each Category.&lt;/p&gt;
&lt;p&gt;In Table Configuration, I didn't change anything. You can build an in-table Bar Graph, should you want to add more visualisation to the report. The bar graph will be added at the end of the table, so it might make sense to move the field used for building the bars to be at the end s that the values are next to the bars. The graph will have axis range instead of a heading.&lt;/p&gt;
&lt;p&gt;In the Per Column Configuration, check only boxes next to fields you want to include in the table. You can also reorder the fields by highlighting them and using green arrows to move them closer to the beginning (â†‘) or the end (â†“) of the table. Highlighting the field will allow you change field-specific parameters, including the name of the field, alignment, decimal places for numeric fields, etc.&lt;/p&gt;
&lt;p&gt;Default Table Settings... will open a pop-up window with formatting settings:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-40.png&quot; alt=&quot;&quot; class=&quot;wp-image-14216&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Row Rules and Column Rules can be used, for example, for highlighting cells with profit below -$1K.&lt;/p&gt;
&lt;p&gt;You can find the configuration I used below:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-38.png&quot; alt=&quot;&quot; class=&quot;wp-image-14214&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;If you add a browse tool afterwards, you should see something similar to the following:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-41.png&quot; alt=&quot;&quot; class=&quot;wp-image-14217&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The results are showing that we have separate Tables for each Region-Category combination: &lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-42.png&quot; alt=&quot;&quot; class=&quot;wp-image-14218&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The first section of the report is thus finished!&lt;/p&gt;
&lt;div style=&quot;height:53px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h4&gt;Map and Heading&lt;/h4&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-44.png&quot; alt=&quot;&quot; class=&quot;wp-image-14223&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The next section would be the map with the heading and the legend. This part of the workflow consists of three reporting reporting tools: Report Map [2], Text [3], Layout [4]:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-30.png&quot; alt=&quot;&quot; class=&quot;wp-image-14205&quot; /&gt;&lt;/figure&gt;
&lt;h5 id=&quot;map&quot;&gt;Map&lt;/h5&gt;
&lt;p&gt;The first step in building a map is creating a spatial object field. In this situation, we only want points so I used the Create Points tool [1] and connected it to Report Map tool [2]. The configuration of the latter is a bit fiddly. The good news is that there is a preview of the map that will be created, so you don't have to run the workflow every time to see minor formatting changes to the map.&lt;/p&gt;
&lt;p&gt;The first tab in the configuration is &lt;em&gt;Settings&lt;/em&gt;, where you can specify the size of the map, resolution, scale, base map and more. If you haven't changed your user settings for maps, you may not have a background - just pick a Reference Base Map other than [None] (I have it set to Carto (Positron)):&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-9.png&quot; alt=&quot;&quot; class=&quot;wp-image-13907&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The next tab, &lt;em&gt;Data&lt;/em&gt;, allows you to select which spatial fields you want to plot on the map, whether you want to group by any of the fields and whether you want to apply conditional formatting based on a field.&lt;/p&gt;
&lt;figure class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;ul class=&quot;blocks-gallery-grid&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-10.png&quot; alt=&quot;&quot; data-id=&quot;13908&quot; class=&quot;wp-image-13908&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/Snag_53907368.png&quot; alt=&quot;&quot; data-id=&quot;13912&quot; data-link=&quot;https://www.theinformationlab.co.uk/?attachment_id=13912&quot; class=&quot;wp-image-13912&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/figure&gt;
&lt;p&gt;There is only one spatial field in the data set I'm using, so the choice is quite easy. (Alternatively, you can keep it on default [All SpatialObjs]). &lt;/p&gt;
&lt;p&gt;We know we want to build the reports separately for each of the Regions. This is where Grouping Field comes in. The unique values of the field you select from the drop-down will become the rows in Group field of the Report Map output and each map will use only relevant data points.&lt;/p&gt;
&lt;p&gt;Thematic Field allows changing the formatting of map objects based on the selected field's values. The formatting can be changed in the &lt;em&gt;Layers&lt;/em&gt; tab. When you first open it, it has only base layers. We need to add a new layer to customise the map. Click on the plus sign -&amp;gt; Points Layer (or whichever option you need) -&amp;gt; #1 (identifies the connection to the tool, compare with what you have in the &lt;em&gt;Data&lt;/em&gt; tab):&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-12.png&quot; alt=&quot;&quot; class=&quot;wp-image-13913&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Once added, you can change the name of the layer should you want to. Expand the menu for the newly created layer by clicking on the + sign next to its name. There will be Style and Theme (only if you have a field selected for Thematic Field the &lt;em&gt;Data&lt;/em&gt; tab). Style will apply changes to all marks, I used it to change the opacity and mark type to circle instead of diamond. (The list of mark types is quite extensive and you can also pick &lt;em&gt;house&lt;/em&gt; as an option! It was a highlight of my day when I've found out. It's the little things, you know?)&lt;/p&gt;
&lt;p&gt;In Theme, I set the Tile Method to Unique Values which allows you to manually specify the groups. I think it's weird it won't just take the unique values within the selected field, instead, you need to list them in Specific Values. And I mean manually type those values there:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-13.png&quot; alt=&quot;&quot; class=&quot;wp-image-14017&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;To make sure the values are exactly the same as in data, you can copy and paste values from cells in Results pane.&lt;/p&gt;
&lt;p&gt;Color Method can vary between discrete and continuous colour palette (Map and Ramp respectively). In our situation, Map makes more sense. I couldn't find a colour palette that I liked, so I decided to manually assign specific colours to each of the Categories. To do so, expand the Theme in the menu. You should see now the same options as what was typed in Specific Values. You will need to expand each of the values separately, then go to Style to update it:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-14.png&quot; alt=&quot;&quot; class=&quot;wp-image-14019&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;As you can see, I have only changed the Color. Tick the Color box and click on '...' box. Sadly, there is no place to type in the hex code of the colour, so you'll need to type in the Red, Green and Blue boxes or play around with the Color Picker. Do the same for the remaining values.&lt;/p&gt;
&lt;p&gt;Finally, let's move on to the &lt;em&gt;Legend&lt;/em&gt; tab. I wanted to have a legend below the map and since there is no such option in the Position, I chose Separate Field:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-15.png&quot; alt=&quot;&quot; class=&quot;wp-image-14022&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This means, that the legend is returned as a separate field in the tool output and I can place it where I want using a layout tool (more on that later on). I have also changed the background colour to white to match the page sheet. This is the output of the Report Map Tool:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-17.png&quot; alt=&quot;&quot; class=&quot;wp-image-14024&quot; /&gt;&lt;/figure&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-16.png&quot; alt=&quot;&quot; class=&quot;wp-image-14023&quot; /&gt;&lt;/figure&gt;
&lt;div style=&quot;height:37px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h5 id=&quot;static-text&quot;&gt;Map Heading&lt;/h5&gt;
&lt;p&gt;Now that we have the maps ready, let's prepare the headings. For the map heading, we want to have a static text. Connect Report Map tool [2] to the Report Text tool [3]. Set the Text Mode to &lt;em&gt;Create new field for this text&lt;/em&gt; and in the Text Data, type in 'Cities with profit below -$500:'.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-31.png&quot; alt=&quot;&quot; class=&quot;wp-image-14206&quot; /&gt;&lt;/figure&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-18.png&quot; alt=&quot;&quot; class=&quot;wp-image-14025&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;If you want to change the formatting of the text, particularly the font, highlight the text you want to change and click on &lt;strong&gt;&lt;em&gt;A&lt;/em&gt;&lt;/strong&gt;. This will open a pop-up window where you'll be able to adjust the font to your liking. A word of caution: the font style (including the bold, cursive and size) will be applied to the entire highlighted text, in other words, you can't change just the typeface. At least not to my knowledge. If you want fonts of different sizes in the heading, make sure everything else is as you want it to be. Otherwise, you'll have to re-do the whole formatting.&lt;/p&gt;
&lt;div style=&quot;height:40px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h5 id=&quot;layout&quot;&gt;Layout&lt;/h5&gt;
&lt;p&gt;Ok, now that we have the map, the legend and the heading, we can put this section together. To do that, we'll need a Layout Tool [4].&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-32.png&quot; alt=&quot;&quot; class=&quot;wp-image-14207&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Keep the Layout Mode as &lt;em&gt;Each&amp;nbsp;Individual&amp;nbsp;Record&lt;/em&gt;, this will allow for combining different fields at a row level as opposed to combining one field for all records. I checked the &lt;em&gt;Include Source Fields Output&lt;/em&gt; but in this case it doesn't make a difference.&lt;/p&gt;
&lt;p&gt;In Layout Configuration, change the Orientation to &lt;em&gt;Vertical&lt;/em&gt;. I didn't change anything else, but you can play around with the layout dimensions, separators between elements being put together and cell padding.&lt;/p&gt;
&lt;p&gt;In the Per Row Configuration, make sure the Text, Map and Legend are all checked and are in this specific order - this is the order they will laid out. You can move the position of a field by highlighting it and using the green arrows. Highlighting a field will also give you the option of changing certain field-specific parameters:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-33.png&quot; alt=&quot;&quot; class=&quot;wp-image-14208&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Here is the whole configuration for reference:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-19.png&quot; alt=&quot;&quot; class=&quot;wp-image-14026&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;And here is the output of the layout tool:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-34-1024x88.png&quot; alt=&quot;&quot; class=&quot;wp-image-14209&quot; /&gt;&lt;/figure&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-35.png&quot; alt=&quot;&quot; class=&quot;wp-image-14210&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;There are four rows, one per Region (Group) and the next part of the report is ready: the map with the heading and legend.&lt;/p&gt;
&lt;div style=&quot;height:70px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h4 id=&quot;dynamic-text&quot;&gt;Category Level Headers&lt;/h4&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-45.png&quot; alt=&quot;&quot; class=&quot;wp-image-14224&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;For this section, we need three Text tools and two Layout tools:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-46.png&quot; alt=&quot;&quot; class=&quot;wp-image-14225&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Unlike in the map heading, we want the text objects in this section to by dynamic and change based on the data values.&lt;/p&gt;
&lt;p&gt;For YTD Sales, keep Text Mode as &lt;em&gt;Create&amp;nbsp;new&amp;nbsp;field&amp;nbsp;for&amp;nbsp;this&amp;nbsp;text&lt;/em&gt;, I named the new field 'YTD Category Sales Text'. In the Text Data, I have:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;YTD Sales: $&amp;#91;Category YTD Sales:0]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The square brackets indicate the field I want to get the value of and :0 indicates no decimal format. To include a field from the data, click on Available Fields -&amp;gt; Field of choice -&amp;gt; Format option (if available):&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-49.png&quot; alt=&quot;&quot; class=&quot;wp-image-14229&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;See below my configuration for reference:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-48.png&quot; alt=&quot;&quot; class=&quot;wp-image-14228&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Because Sales cannot be negative, I just used dollar sign before the field. In case of profit, however, this is not the case. At the level of category, the value can be positive or negative and I needed to built a formula to make sure the formatting is correct. I created a new string field, called New Profit with following expression:&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;If &amp;#91;Category YTD Profit] &amp;lt; 0
then '-$'+ToString(ABS(&amp;#91;Category YTD Profit]),0,1)
else '$'+ToString(&amp;#91;Category YTD Profit],0,1)
endif&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The above checks whether the profit is negative. If it is, then it returns the profit value with dollar sign between the minus sign and the numbers. Otherwise, it adds the dollar sign before the profit value. ToString function transforms a number into text and it allows you to format the number as you wish: the second argument is the number of decimal places (0 - off above), thousands separator (1 - on above) and decimal separator (not present above, default value is 0 - off).&lt;/p&gt;
&lt;p&gt;Text Tool for YTD Profit is very similar to that of YTD Sales. The difference is the field included is a string and not a number:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-50.png&quot; alt=&quot;&quot; class=&quot;wp-image-14230&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Very similar settings for Category Heading (Category Text) as well:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/06/image-51.png&quot; alt=&quot;&quot; class=&quot;wp-image-14231&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Now that we have all the text fields that we need for this section, it's time for the Layout tools. In this case, we'll need two of them: first to join YTD Sales and YTD Profit side by side and second to the Category Heading with the joined Sales and Profit.&lt;/p&gt;
&lt;p&gt;Let's drag in a Layout tool. Keep the Layout Mode as &lt;em&gt;Each&amp;nbsp;Individual&amp;nbsp;Record&lt;/em&gt;. In the Layout Configuration, I didn't change anything (the orientation should be set to &lt;em&gt;Horizontal&lt;/em&gt;). In Per Column Configuration, keep only YTD Sales and YTD Profit checked. To make sure the Sales and Profit sections are distributed evenly, highlight YTD Sales, change Width to &lt;em&gt;Percentage&lt;/em&gt; and set it to 50%. (You can repeat it for YTD Profit, but it's not necessary). Here's the full configuration:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-2.png&quot; alt=&quot;&quot; class=&quot;wp-image-14235&quot; /&gt;&lt;/figure&gt;
&lt;p&gt; Drag another Layout Tool. I haven't changed anything in the top section. In Layout Configuration, however, make sure to change Orientation to &lt;em&gt;Vertical&lt;/em&gt;. In Per Row Configuration, there should be only two fields available: the Category Heading and Layout (the result of the previous layout tool).  Keep both fields checked, with Category Heading first:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-1.png&quot; alt=&quot;&quot; class=&quot;wp-image-14234&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;This is the result presented by a Browse Tool:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-3.png&quot; alt=&quot;&quot; class=&quot;wp-image-14236&quot; /&gt;&lt;/figure&gt;
&lt;h4 id=&quot;mce_33&quot;&gt;Region Level Headers&lt;/h4&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-7.png&quot; alt=&quot;&quot; class=&quot;wp-image-14240&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The setup here is very similar to that of category level headers. The only differences are: the formatting and the data which is at a regional level.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-4.png&quot; alt=&quot;&quot; class=&quot;wp-image-14237&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;As the tools used and the configuration is so similar to the previous one, I'll cover the differences here. &lt;/p&gt;
&lt;p&gt;In the YTD Sales (and YTD Profit), I used central alignment and made the font for the number bigger and bold. To have different formatting within a single Report Text, highlight only a part of the text and then click on &lt;em&gt;&lt;strong&gt;A&lt;/strong&gt;&lt;/em&gt; to change the font style:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-5.png&quot; alt=&quot;&quot; class=&quot;wp-image-14238&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The Region Report Text, only has [Region:A] centered in the text input.&lt;/p&gt;
&lt;p&gt;After the vertical Layout Tool, you should get something similar to this:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-6.png&quot; alt=&quot;&quot; class=&quot;wp-image-14239&quot; /&gt;&lt;/figure&gt;
&lt;div style=&quot;height:53px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3&gt;Put the Report Together&lt;/h3&gt;
&lt;p&gt;Now that we have all sections and almost all elements ready (we are only missing a header at the moment), we need to combine the sections to form a full report. This task will require a few Joins, a few more Layout Tools and a Header Tool:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-8.png&quot; alt=&quot;&quot; class=&quot;wp-image-14242&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;First, let's join the Table and the Category Heading by Category and Region. Feel free to get rid of some of the field, but keep Category, Region, Table and Layout. &lt;/p&gt;
&lt;p&gt;Then, in the Layout Tool, change Orientation to &lt;em&gt;Vertical&lt;/em&gt;, make sure both Layout and Table are checked and that Layout is first. This will create Category sections, each with it's heading and a table with details.&lt;/p&gt;
&lt;p&gt;Now we can put all Categories together for a single Region. In the next Layout Tool, change Layout Mode to &lt;em&gt;Each&amp;nbsp;Group&amp;nbsp;of&amp;nbsp;Records&lt;/em&gt; and group by Region. Change Orientation to &lt;em&gt;Vertical&lt;/em&gt;. I also added cell padding of 15 to separate visually the Categories. Leave Per Row Configuration as is:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-9.png&quot; alt=&quot;&quot; class=&quot;wp-image-14243&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;See below an example of the output:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-10.png&quot; alt=&quot;&quot; class=&quot;wp-image-14244&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Let's join now the Categories sections with the Region-level elements. You can use a multi-join tool, but a multiple joins approach is a safer option and it's easier to check everything is joining correctly.  First, join the output of the most recent Layout tool with the Region Level Headers by Region. Then join the inner join (anchor J) with the map also by Region. From the Map section, I only kept the Layout field and renamed it Map.&lt;/p&gt;
&lt;p&gt;Now, add another Layout Tool. Change Orientation to &lt;em&gt;Vertical&lt;/em&gt;, add white separator of 1 pixel and cell padding of 5 pixels. In Per Row Configuration, keep Region Layout, Map and Category Tables checked and in that order (the field were renamed in the joins, you can also do that before the joins so it's not confusing). &lt;/p&gt;
&lt;p&gt;This is the setting:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-11.png&quot; alt=&quot;&quot; class=&quot;wp-image-14246&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;And this is the result at this stage:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-12.png&quot; alt=&quot;&quot; class=&quot;wp-image-14247&quot; /&gt;&lt;/figure&gt;
&lt;h5 id=&quot;header&quot;&gt;Header&lt;/h5&gt;
&lt;p&gt;The report is nearly ready, we only need a header. Drag in a Header Tool. In its configuration, you can type in the title of the report. I decided to include the date as well (pick whichever date format you prefer). Additionally, you can add more branding to the report by using an image (logo) in the header. By default, it will be an Alteryx logo, but you can also upload your own image.&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-13.png&quot; alt=&quot;&quot; class=&quot;wp-image-14248&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;There are two ways to combine the header with the rest of the report. You can either use a Layout Tool or a Render Tool. Render Tool will also render and save the report into a file. However, as I wanted to send the report in the email, I used the Layout method.&lt;/p&gt;
&lt;p&gt;Let's take yet another Layout Tool, change the Orientation to &lt;em&gt;Vertical&lt;/em&gt; and check Header and Layout (and keep them in this order) in the Per Row Configuration. And here's the report:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-14.png&quot; alt=&quot;&quot; class=&quot;wp-image-14249&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Awesome! The report is pretty much ready, we need to store it somewhere now. We can either save it into a file or send it in an email.&lt;/p&gt;
&lt;div style=&quot;height:41px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3 id=&quot;render&quot;&gt;Save the report&lt;/h3&gt;
&lt;p&gt;To save the report, grab a Render Tool. In Render Configuration,  change Output Mode to &lt;em&gt;Choose&amp;nbsp;a&amp;nbsp;Specific&amp;nbsp;Output&amp;nbsp;File&lt;/em&gt;. In the output file, I typed in &lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;report.pdf&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The name of the file is not really that important as we will change it. The extension, however, needs to match one of the supported file types. Check Group Data Into Separate Reports, choose &lt;em&gt;Region&lt;/em&gt; as Field to Group On and for Modify Filename By select &lt;em&gt;Replacing&amp;nbsp;Filename&amp;nbsp;With&amp;nbsp;Group&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;In Report Data, change Separator to &lt;em&gt;Insert&amp;nbsp;Whitespace&amp;nbsp;Between&amp;nbsp;Records&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;In Report Style,  change Paper Size to A4 and adjust margins if you want to. &lt;/p&gt;
&lt;p&gt;Now every time you run the workflow, the reports will be created and saved to the specified files. Make sure the files are not open when running the workflow as this will result in an error. If you don't want to overwrite files and want to keep history of the reports, you can use a formula tool and combine the Region with today's date - this will also allow for quick identification of the report without opening it.&lt;/p&gt;
&lt;div style=&quot;height:41px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;h3 id=&quot;email&quot;&gt;Email the Report&lt;/h3&gt;
&lt;p&gt;Alternatively, if you want your colleagues to receive the reports directly, you can do it by sending the report in an email. The workflow here is not a single tool, but that allows you to make the emails dynamic:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-15.png&quot; alt=&quot;&quot; class=&quot;wp-image-14252&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;The mailing list input (here as a text input but you can use a file stored somewhere in your database) should contain two columns: Region and Email address. The email addresses might be of specific people or subscription lists:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-16.png&quot; alt=&quot;&quot; class=&quot;wp-image-14253&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;Once you have the mailing list with assigned Region, join it with the Layout tool that combined the report with the header. Then drag in an Email Tool and let the magic begin.&lt;/p&gt;
&lt;p&gt;Keep the Enabled box checked, this will send out the emails. If the box is unchecked, the Email Tool is disabled but it keeps all the settings (pretty much has the same effect as adding the tool t a container and disabling the container).&lt;/p&gt;
&lt;p&gt;SMTP will depend on your company IT infrastructure. If you're using Gmail as your email provider, then type in&lt;/p&gt;
&lt;pre class=&quot;wp-block-code&quot;&gt;&lt;code&gt;smtp-relay.gmail.com&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;otherwise, I would suggest checking with IT. Consult &lt;a href=&quot;https://help.alteryx.com/2018.2/Email.htm&quot;&gt;Alteryx help&lt;/a&gt; page for more information.&lt;/p&gt;
&lt;p&gt;For the next section (To, Cc, Bcc, From, Subject), you can either type in the values or use a field if you want to make them dynamic. The necessary fields are To, From and Subject.&lt;/p&gt;
&lt;p&gt;In the Body of the email, I used &lt;em&gt;Use&amp;nbsp;Field&lt;/em&gt; and selected &lt;em&gt;Layout&lt;/em&gt; from the drop-down. Alternatively, you could send the report as an Attachment but that makes things much more complex and I would advise against it unless it's absolutely necessary (if there's a need for it, I might write a blog post on how to do that as well). In case of sending the report in the body of the email, the workflow can be uploaded to Alteryx Server Gallery and scheduled there so that the reports are built as frequent as need in an automated manner. (If you want to keep the history of the reports, include the Render Tool as described above, but make sure the file is saved on a drive the server has access to.)&lt;/p&gt;
&lt;p&gt;Here's the tool configuration:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-17.png&quot; alt=&quot;&quot; class=&quot;wp-image-14254&quot; /&gt;&lt;/figure&gt;
&lt;div style=&quot;height:38px&quot; aria-hidden=&quot;true&quot; class=&quot;wp-block-spacer&quot;&gt;&lt;/div&gt;
&lt;p&gt;The whole workflow, in all its glory:&lt;/p&gt;
&lt;figure class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image-18.png&quot; alt=&quot;&quot; class=&quot;wp-image-14260&quot; /&gt;&lt;/figure&gt;
&lt;p&gt;And, finally, the reports. The PDF and email screenshot from my phone:&lt;/p&gt;
&lt;figure class=&quot;wp-block-gallery columns-2 is-cropped&quot;&gt;&lt;ul class=&quot;blocks-gallery-grid&quot;&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/pdf-report.png&quot; alt=&quot;&quot; data-id=&quot;14255&quot; data-link=&quot;https://www.theinformationlab.co.uk/?attachment_id=14255&quot; class=&quot;wp-image-14255&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;li class=&quot;blocks-gallery-item&quot;&gt;&lt;figure&gt;&lt;img src=&quot;https://www.theinformationlab.co.uk/wp-content/uploads/2019/07/image1-1-602x1024.png&quot; alt=&quot;&quot; data-id=&quot;14258&quot; data-link=&quot;https://www.theinformationlab.co.uk/?attachment_id=14258&quot; class=&quot;wp-image-14258&quot; /&gt;&lt;/figure&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/figure&gt;
&lt;p&gt;That's it! I know this is a long post and if you managed to get this far, I bow to you!&lt;/p&gt;</content><author><name>Hanna Nykowska</name></author><category term="alteryx" /><summary type="html">Say you have data that gets regularly updated and you need to send those updates to multiple people. Build automated reports with Alteryx! First published on The Information Lab Blog.</summary></entry></feed>